{"remainingRequest":"/ngafid/ngafid2.0/node_modules/babel-loader/lib/index.js??ruleSet[1].rules[0].use[1]!/ngafid/ngafid2.0/src/main/javascript/aggregate.js","dependencies":[{"path":"/ngafid/ngafid2.0/src/main/javascript/aggregate.js","mtime":1664810261238},{"path":"/ngafid/ngafid2.0/.babelrc","mtime":1664810261182},{"path":"/ngafid/ngafid2.0/node_modules/cache-loader/dist/cjs.js","mtime":1664910647113},{"path":"/ngafid/ngafid2.0/node_modules/babel-loader/lib/index.js","mtime":1664910647213}],"contextDependencies":[],"result":["function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport 'bootstrap';\nimport React, { Component } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { errorModal } from \"./error_modal.js\";\nimport SignedInNavbar from \"./signed_in_navbar.js\";\nimport TimeHeader from \"./time_header.js\";\nimport Plotly from 'plotly.js';\nairframes.unshift(\"All Airframes\");\nvar index = airframes.indexOf(\"Garmin Flight Display\");\nif (index !== -1) airframes.splice(index, 1);\nconsole.log(eventCounts);\n\nfunction displayPlots(selectedAirframe) {\n  console.log(\"displaying plots with airframe: '\" + selectedAirframe + \"'\");\n  var countData = [];\n  var percentData = [];\n  var fleetPercents = {\n    name: 'All Fleets',\n    type: 'bar',\n    orientation: 'h',\n    hoverinfo: 'y+text',\n    hovertext: [],\n    y: [],\n    x: [],\n    flightsWithEventCounts: [],\n    totalFlightsCounts: []\n  };\n\n  for (var _i = 0, _Object$entries = Object.entries(eventCounts); _i < _Object$entries.length; _i++) {\n    var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),\n        key = _Object$entries$_i[0],\n        value = _Object$entries$_i[1];\n\n    if (value.airframeName === \"Garmin Flight Display\") continue;\n    if (selectedAirframe !== value.airframeName && selectedAirframe !== \"All Airframes\") continue; //console.log(key);\n    //console.log(value);\n\n    value.name = value.airframeName;\n    value.y = value.names;\n    value.type = 'bar';\n    value.orientation = 'h'; //value.hoverinfo = 'text';\n    //don't add airframes to the count plot that the fleet doesn't have\n\n    if (airframes.indexOf(value.airframeName) >= 0) countData.push(value);\n    value.x = value.totalEventsCounts;\n\n    for (var i = 0; i < value.names.length; i++) {\n      //don't add airframes to the fleet percentage plot that the fleet doesn't have\n      if (airframes.indexOf(value.airframeName) >= 0) {\n        var index = fleetPercents.y.indexOf(value.names[i]);\n\n        if (index !== -1) {\n          fleetPercents.flightsWithEventCounts[index] += value.flightsWithEventCounts[i];\n          fleetPercents.totalFlightsCounts[index] += value.totalFlightsCounts[i];\n        } else {\n          var pos = fleetPercents.y.length;\n          fleetPercents.y.push(value.names[i]);\n          fleetPercents.flightsWithEventCounts[pos] = value.flightsWithEventCounts[i];\n          fleetPercents.totalFlightsCounts[pos] = value.totalFlightsCounts[i];\n        }\n      }\n    }\n  }\n\n  percentData.push(fleetPercents);\n  console.log(fleetPercents);\n\n  for (var j = 0; j < percentData.length; j++) {\n    var _value = percentData[j];\n    _value.x = [];\n\n    for (var _i2 = 0; _i2 < _value.totalFlightsCounts.length; _i2++) {\n      _value.x.push(100.0 * parseFloat(_value.flightsWithEventCounts[_i2]) / parseFloat(_value.totalFlightsCounts[_i2])); //console.log(value.x[i]);\n\n\n      var fixedText = \"\";\n\n      if (_value.x[_i2] > 0 && _value.x[_i2] < 1) {\n        //console.log(\"Log10 of x is \" + Math.log10(value.x[i]));\n        fixedText = _value.x[_i2].toFixed(-Math.ceil(Math.log10(_value.x[_i2])) + 2) + \"%\";\n      } else {\n        fixedText = _value.x[_i2].toFixed(2) + \"%\";\n      }\n\n      _value.hovertext.push(fixedText); //console.log(\"converted to \" + fixedText);\n\n    }\n  }\n\n  var countLayout = {\n    title: 'Event Counts',\n    barmode: 'stack',\n    //autosize: false,\n    //width: 500,\n    //height: 500,\n    margin: {\n      l: 250,\n      r: 50,\n      b: 50,\n      t: 50,\n      pad: 4\n    }\n  };\n  var percentLayout = {\n    title: 'Percentage of Flights With Event',\n    //autosize: false,\n    //width: 500,\n    //height: 500,\n    margin: {\n      l: 250,\n      r: 50,\n      b: 50,\n      t: 50,\n      pad: 4\n    }\n  };\n  var config = {\n    responsive: true\n  };\n  Plotly.newPlot('event-counts-plot', countData, countLayout, config);\n  Plotly.newPlot('event-percents-plot', percentData, percentLayout, config);\n}\n\nvar AggregatePage = /*#__PURE__*/function (_React$Component) {\n  _inherits(AggregatePage, _React$Component);\n\n  var _super = _createSuper(AggregatePage);\n\n  function AggregatePage(props) {\n    var _this;\n\n    _classCallCheck(this, AggregatePage);\n\n    _this = _super.call(this, props);\n    var date = new Date();\n    _this.state = {\n      airframe: \"All Airframes\",\n      startYear: 2020,\n      startMonth: 1,\n      endYear: date.getFullYear(),\n      endMonth: date.getMonth() + 1,\n      datesChanged: false\n    };\n    return _this;\n  }\n\n  _createClass(AggregatePage, [{\n    key: \"updateStartYear\",\n    value: function updateStartYear(newStartYear) {\n      console.log(\"setting new start year to: \" + newStartYear);\n      this.setState({\n        startYear: newStartYear,\n        datesChanged: true\n      });\n      console.log(this.state);\n    }\n  }, {\n    key: \"updateStartMonth\",\n    value: function updateStartMonth(newStartMonth) {\n      console.log(\"setting new start month to: \" + newStartMonth);\n      this.setState({\n        startMonth: newStartMonth,\n        datesChanged: true\n      });\n      console.log(this.state);\n    }\n  }, {\n    key: \"updateEndYear\",\n    value: function updateEndYear(newEndYear) {\n      console.log(\"setting new end year to: \" + newEndYear);\n      this.setState({\n        endYear: newEndYear,\n        datesChanged: true\n      });\n      console.log(this.state);\n    }\n  }, {\n    key: \"updateEndMonth\",\n    value: function updateEndMonth(newEndMonth) {\n      console.log(\"setting new end month to: \" + newEndMonth);\n      this.setState({\n        endMonth: newEndMonth,\n        datesChanged: true\n      });\n      console.log(this.state);\n    }\n  }, {\n    key: \"dateChange\",\n    value: function dateChange() {\n      console.log(\"[aggregatecard] notifying date change 2, startYear: '\" + this.state.startYear + \"', startMonth: '\" + this.state.startMonth + \", endYear: '\" + this.state.endYear + \"', endMonth: '\" + this.state.endMonth + \"'\");\n      var startDate = this.state.startYear + \"-\";\n      var endDate = this.state.endYear + \"-\"; //0 pad the months on the front\n\n      if (parseInt(this.state.startMonth) < 10) startDate += \"0\" + parseInt(this.state.startMonth);else startDate += this.state.startMonth;\n      if (parseInt(this.state.endMonth) < 10) endDate += \"0\" + parseInt(this.state.endMonth);else endDate += this.state.endMonth;\n      var submission_data = {\n        startDate: startDate + \"-01\",\n        endDate: endDate + \"-28\"\n      };\n      $('#loading').show();\n      console.log(\"showing loading spinner!\");\n      var aggregatePage = this;\n      $.ajax({\n        type: 'POST',\n        url: '/protected/all_event_counts',\n        data: submission_data,\n        dataType: 'json',\n        success: function success(response) {\n          console.log(\"received response: \");\n          console.log(response);\n          $('#loading').hide();\n\n          if (response.err_msg) {\n            errorModal.show(response.err_title, response.err_msg);\n            return;\n          }\n\n          eventCounts = response;\n          displayPlots(aggregatePage.state.airframe);\n          aggregatePage.setState({\n            datesChanged: false\n          });\n        },\n        error: function error(jqXHR, textStatus, errorThrown) {\n          errorModal.show(\"Error Loading Uploads\", errorThrown);\n        },\n        async: true\n      });\n    }\n  }, {\n    key: \"airframeChange\",\n    value: function airframeChange(airframe) {\n      this.setState({\n        airframe: airframe\n      });\n      displayPlots(airframe);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      //console.log(systemIds);\n      var numberOptions = {\n        minimumFractionDigits: 2,\n        maximumFractionDigits: 2\n      };\n      return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(SignedInNavbar, {\n        activePage: \"aggregate\",\n        waitingUserCount: waitingUserCount,\n        fleetManager: fleetManager,\n        unconfirmedTailsCount: unconfirmedTailsCount,\n        modifyTailsAccess: modifyTailsAccess,\n        plotMapHidden: plotMapHidden\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container-fluid\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-lg-6\",\n        style: {\n          paddingRight: \"0\"\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card mb-2 m-2\",\n        style: {\n          background: \"rgba(248,259,250,0.8)\"\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"card-header\",\n        style: {\n          color: \"rgba(75,75,75,250)\"\n        }\n      }, \"All Fleets\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-body\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-sm-4\"\n      }, /*#__PURE__*/React.createElement(\"h3\", null, Number(flightHours / (60 * 60)).toLocaleString('en', numberOptions)), \" Flight Hours \", /*#__PURE__*/React.createElement(\"br\", null)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-sm-4\"\n      }, /*#__PURE__*/React.createElement(\"h3\", null, Number(numberFlights).toLocaleString('en')), \" Flights \", /*#__PURE__*/React.createElement(\"br\", null)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-sm-4\"\n      }, /*#__PURE__*/React.createElement(\"h3\", null, Number(numberAircraft).toLocaleString('en')), \" Aircraft \", /*#__PURE__*/React.createElement(\"br\", null))), /*#__PURE__*/React.createElement(\"hr\", null), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-sm-4\"\n      }, /*#__PURE__*/React.createElement(\"h3\", null, Number(yearFlightHours / (60 * 60)).toLocaleString('en')), \" Flight Hours This Year\", /*#__PURE__*/React.createElement(\"br\", null)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-sm-4\"\n      }, /*#__PURE__*/React.createElement(\"h3\", null, Number(yearNumberFlights).toLocaleString('en')), \" Flights This Year\", /*#__PURE__*/React.createElement(\"br\", null))), /*#__PURE__*/React.createElement(\"hr\", null), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-sm-4\"\n      }, /*#__PURE__*/React.createElement(\"h3\", null, Number(monthFlightHours / (60 * 60)).toLocaleString('en')), \" Flight Hours (Last 30 Days)\", /*#__PURE__*/React.createElement(\"br\", null)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-sm-4\"\n      }, /*#__PURE__*/React.createElement(\"h3\", null, Number(monthNumberFlights).toLocaleString('en')), \" Flights (Last 30 Days)\", /*#__PURE__*/React.createElement(\"br\", null)))))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-lg-6\",\n        style: {\n          paddingLeft: \"0\"\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card mb-2 m-2\",\n        style: {\n          background: \"rgba(248,259,250,0.8)\"\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"card-header\",\n        style: {\n          color: \"rgba(75,75,75,250)\"\n        }\n      }, \"Events\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-body\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-sm-4\"\n      }, /*#__PURE__*/React.createElement(\"h3\", null, Number(totalEvents).toLocaleString('en')), \" Total Events\", /*#__PURE__*/React.createElement(\"br\", null)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-sm-4\"\n      }, /*#__PURE__*/React.createElement(\"h3\", null, Number(yearEvents).toLocaleString('en')), \" Events This Year\", /*#__PURE__*/React.createElement(\"br\", null)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-sm-4\"\n      }, /*#__PURE__*/React.createElement(\"h3\", null, Number(monthEvents).toLocaleString('en')), \" Events This Month\", /*#__PURE__*/React.createElement(\"br\", null))))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card mb-2 m-2\",\n        style: {\n          background: \"rgba(248,259,250,0.8)\"\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"card-header\",\n        style: {\n          color: \"rgba(75,75,75,250)\"\n        }\n      }, \"Participation\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-body\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-sm-4\"\n      }, /*#__PURE__*/React.createElement(\"h3\", null, numberFleets), \" Fleets \", /*#__PURE__*/React.createElement(\"br\", null)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-sm-4\"\n      }, /*#__PURE__*/React.createElement(\"h3\", null, numberUsers), \" Users\", /*#__PURE__*/React.createElement(\"br\", null))))))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-lg-12\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card mb-2 m-2\",\n        style: {\n          background: \"rgba(248,259,250,0.8)\"\n        }\n      }, /*#__PURE__*/React.createElement(TimeHeader, {\n        name: \"Events\",\n        airframes: airframes,\n        airframe: this.state.airframe,\n        startYear: this.state.startYear,\n        startMonth: this.state.startMonth,\n        endYear: this.state.endYear,\n        endMonth: this.state.endMonth,\n        datesChanged: this.state.datesChanged,\n        dateChange: function dateChange() {\n          return _this2.dateChange();\n        },\n        airframeChange: function airframeChange(airframe) {\n          return _this2.airframeChange(airframe);\n        },\n        updateStartYear: function updateStartYear(newStartYear) {\n          return _this2.updateStartYear(newStartYear);\n        },\n        updateStartMonth: function updateStartMonth(newStartMonth) {\n          return _this2.updateStartMonth(newStartMonth);\n        },\n        updateEndYear: function updateEndYear(newEndYear) {\n          return _this2.updateEndYear(newEndYear);\n        },\n        updateEndMonth: function updateEndMonth(newEndMonth) {\n          return _this2.updateEndMonth(newEndMonth);\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-body\",\n        style: {\n          padding: \"0\"\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\",\n        style: {\n          margin: \"0\"\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-lg-6\",\n        style: {\n          padding: \"0 8 0 0\"\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"event-counts-plot\"\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-lg-6\",\n        style: {\n          padding: \"0 0 0 8\"\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"event-percents-plot\"\n      })))))))));\n    }\n  }]);\n\n  return AggregatePage;\n}(React.Component);\n\nvar aggregatePage = ReactDOM.render( /*#__PURE__*/React.createElement(AggregatePage, null), document.querySelector('#aggregate-page'));\ndisplayPlots(\"All Airframes\");",{"version":3,"names":["React","Component","ReactDOM","errorModal","SignedInNavbar","TimeHeader","Plotly","airframes","unshift","index","indexOf","splice","console","log","eventCounts","displayPlots","selectedAirframe","countData","percentData","fleetPercents","name","type","orientation","hoverinfo","hovertext","y","x","flightsWithEventCounts","totalFlightsCounts","Object","entries","key","value","airframeName","names","push","totalEventsCounts","i","length","pos","j","parseFloat","fixedText","toFixed","Math","ceil","log10","countLayout","title","barmode","margin","l","r","b","t","pad","percentLayout","config","responsive","newPlot","AggregatePage","props","date","Date","state","airframe","startYear","startMonth","endYear","getFullYear","endMonth","getMonth","datesChanged","newStartYear","setState","newStartMonth","newEndYear","newEndMonth","startDate","endDate","parseInt","submission_data","$","show","aggregatePage","ajax","url","data","dataType","success","response","hide","err_msg","err_title","error","jqXHR","textStatus","errorThrown","async","numberOptions","minimumFractionDigits","maximumFractionDigits","waitingUserCount","fleetManager","unconfirmedTailsCount","modifyTailsAccess","plotMapHidden","paddingRight","background","color","Number","flightHours","toLocaleString","numberFlights","numberAircraft","yearFlightHours","yearNumberFlights","monthFlightHours","monthNumberFlights","paddingLeft","totalEvents","yearEvents","monthEvents","numberFleets","numberUsers","dateChange","airframeChange","updateStartYear","updateStartMonth","updateEndYear","updateEndMonth","padding","render","document","querySelector"],"sources":["/ngafid/ngafid2.0/src/main/javascript/aggregate.js"],"sourcesContent":["import 'bootstrap';\n\nimport React, { Component } from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport { errorModal } from \"./error_modal.js\";\nimport SignedInNavbar from \"./signed_in_navbar.js\";\n\nimport  TimeHeader from \"./time_header.js\";\n\nimport Plotly from 'plotly.js';\n\n\nairframes.unshift(\"All Airframes\");\nvar index = airframes.indexOf(\"Garmin Flight Display\");\nif (index !== -1) airframes.splice(index, 1);\n\nconsole.log(eventCounts);\n\nfunction displayPlots(selectedAirframe) {\n    console.log(\"displaying plots with airframe: '\" + selectedAirframe + \"'\");\n\n    var countData = [];\n    var percentData = [];\n\n    var fleetPercents = {\n        name : 'All Fleets',\n        type : 'bar',\n        orientation : 'h',\n        hoverinfo : 'y+text',\n        hovertext : [],\n        y : [],\n        x : [],\n        flightsWithEventCounts : [],\n        totalFlightsCounts : []\n    }\n\n\n    for (let [key, value] of Object.entries(eventCounts)) {\n        if (value.airframeName === \"Garmin Flight Display\") continue;\n        if (selectedAirframe !== value.airframeName && selectedAirframe !== \"All Airframes\") continue;\n\n        //console.log(key);\n        //console.log(value);\n\n        value.name = value.airframeName;\n        value.y = value.names;\n        value.type = 'bar';\n        value.orientation = 'h';\n        //value.hoverinfo = 'text';\n\n        //don't add airframes to the count plot that the fleet doesn't have\n        if (airframes.indexOf(value.airframeName) >= 0) countData.push(value);\n        value.x = value.totalEventsCounts;\n\n        for (let i = 0; i < value.names.length; i++) {\n            //don't add airframes to the fleet percentage plot that the fleet doesn't have\n            if (airframes.indexOf(value.airframeName) >= 0) {\n                var index = fleetPercents.y.indexOf(value.names[i]);\n                if (index !== -1) {\n                    fleetPercents.flightsWithEventCounts[index] += value.flightsWithEventCounts[i];\n                    fleetPercents.totalFlightsCounts[index] += value.totalFlightsCounts[i];\n                } else {\n                    let pos = fleetPercents.y.length;\n                    fleetPercents.y.push(value.names[i]);\n                    fleetPercents.flightsWithEventCounts[pos] = value.flightsWithEventCounts[i];\n                    fleetPercents.totalFlightsCounts[pos] = value.totalFlightsCounts[i];\n                }\n            }\n        }\n    }\n\n    percentData.push(fleetPercents);\n\n    console.log(fleetPercents);\n\n    for (let j = 0; j < percentData.length; j++) {\n        let value = percentData[j];\n        value.x = [];\n\n        for (let i = 0; i < value.totalFlightsCounts.length; i++) {\n            value.x.push( 100.0 * parseFloat(value.flightsWithEventCounts[i]) / parseFloat(value.totalFlightsCounts[i]) );\n\n            //console.log(value.x[i]);\n            var fixedText = \"\";\n            if (value.x[i] > 0 && value.x[i] < 1) {\n                //console.log(\"Log10 of x is \" + Math.log10(value.x[i]));\n                fixedText = value.x[i].toFixed(-Math.ceil(Math.log10(value.x[i])) + 2) + \"%\"\n            } else {\n                fixedText = value.x[i].toFixed(2) + \"%\";\n            }\n            value.hovertext.push(fixedText);\n\n            //console.log(\"converted to \" + fixedText);\n        }\n    }\n\n    var countLayout = {\n        title : 'Event Counts',\n        barmode: 'stack',\n        //autosize: false,\n        //width: 500,\n        //height: 500,\n        margin: {\n            l: 250,\n            r: 50,\n            b: 50,\n            t: 50,\n            pad: 4\n        }\n    };\n\n    var percentLayout = {\n        title : 'Percentage of Flights With Event',\n        //autosize: false,\n        //width: 500,\n        //height: 500,\n        margin: {\n            l: 250,\n            r: 50,\n            b: 50,\n            t: 50,\n            pad: 4\n        }\n    };\n\n\n    var config = {responsive: true}\n\n    Plotly.newPlot('event-counts-plot', countData, countLayout, config);\n    Plotly.newPlot('event-percents-plot', percentData, percentLayout, config);\n}\n\n\n\n\nclass AggregatePage extends React.Component {\n    constructor(props) {\n        super(props);\n\n        var date = new Date();\n        this.state = {\n            airframe : \"All Airframes\",\n            startYear : 2020,\n            startMonth : 1,\n            endYear : date.getFullYear(),\n            endMonth : date.getMonth() + 1,\n            datesChanged : false\n        };\n    }\n\n    updateStartYear(newStartYear) {\n        console.log(\"setting new start year to: \" + newStartYear);\n        this.setState({startYear : newStartYear, datesChanged : true});\n        console.log(this.state);\n    }\n\n    updateStartMonth(newStartMonth) {\n        console.log(\"setting new start month to: \" + newStartMonth);\n        this.setState({startMonth : newStartMonth, datesChanged : true});\n        console.log(this.state);\n    }\n\n    updateEndYear(newEndYear) {\n        console.log(\"setting new end year to: \" + newEndYear);\n        this.setState({endYear : newEndYear, datesChanged : true});\n        console.log(this.state);\n    }\n\n    updateEndMonth(newEndMonth) {\n        console.log(\"setting new end month to: \" + newEndMonth);\n        this.setState({endMonth : newEndMonth, datesChanged : true});\n        console.log(this.state);\n    }\n\n    dateChange() {\n        console.log(\"[aggregatecard] notifying date change 2, startYear: '\" + this.state.startYear + \"', startMonth: '\" + this.state.startMonth + \", endYear: '\" + this.state.endYear + \"', endMonth: '\" + this.state.endMonth + \"'\"); \n\n        let startDate = this.state.startYear + \"-\";\n        let endDate = this.state.endYear + \"-\";\n\n        //0 pad the months on the front\n        if (parseInt(this.state.startMonth) < 10) startDate += \"0\" + parseInt(this.state.startMonth);\n        else startDate += this.state.startMonth;\n        if (parseInt(this.state.endMonth) < 10) endDate += \"0\" + parseInt(this.state.endMonth);\n        else endDate += this.state.endMonth;\n\n        var submission_data = {\n            startDate : startDate + \"-01\",\n            endDate : endDate + \"-28\"\n        };\n\n        $('#loading').show();\n        console.log(\"showing loading spinner!\");\n\n        let aggregatePage = this;\n\n        $.ajax({\n            type: 'POST',\n            url: '/protected/all_event_counts',\n            data : submission_data,\n            dataType : 'json',\n            success : function(response) {\n                console.log(\"received response: \");\n                console.log(response);\n\n                $('#loading').hide();\n\n                if (response.err_msg) {\n                    errorModal.show(response.err_title, response.err_msg);\n                    return;\n                }   \n\n                eventCounts = response;\n                displayPlots(aggregatePage.state.airframe);\n                aggregatePage.setState({datesChanged : false});\n            },   \n            error : function(jqXHR, textStatus, errorThrown) {\n                errorModal.show(\"Error Loading Uploads\", errorThrown);\n            },   \n            async: true \n        });  \n    }\n\n    airframeChange(airframe) {\n        this.setState({airframe});\n        displayPlots(airframe);\n    }\n\n    render() {\n        //console.log(systemIds);\n\n        const numberOptions = { \n            minimumFractionDigits: 2,\n            maximumFractionDigits: 2 \n        };\n\n        return (\n            <div>\n                <SignedInNavbar activePage={\"aggregate\"} waitingUserCount={waitingUserCount} fleetManager={fleetManager} unconfirmedTailsCount={unconfirmedTailsCount} modifyTailsAccess={modifyTailsAccess} plotMapHidden={plotMapHidden}/>\n\n                <div className=\"container-fluid\">\n                    <div className=\"row\">\n                        <div className=\"col-lg-6\" style={{paddingRight:\"0\"}}>\n                            <div className=\"card mb-2 m-2\" style={{background : \"rgba(248,259,250,0.8)\"}}>\n                                <h4 className=\"card-header\" style={{color : \"rgba(75,75,75,250)\"}}>All Fleets</h4>\n                                <div className=\"card-body\">\n                                    <div className=\"row\">\n                                        <div className = \"col-sm-4\">\n                                            <h3>{Number(flightHours / (60 * 60)).toLocaleString('en', numberOptions)}</h3> Flight Hours <br></br>\n                                        </div>\n\n                                        <div className = \"col-sm-4\">\n                                            <h3>{Number(numberFlights).toLocaleString('en')}</h3> Flights <br></br>\n                                        </div>\n\n                                        <div className = \"col-sm-4\">\n                                            <h3>{Number(numberAircraft).toLocaleString('en')}</h3> Aircraft <br></br>\n                                        </div>\n                                    </div>\n\n                                    <hr></hr>\n                                    <div className=\"row\">\n                                        <div className = \"col-sm-4\">\n                                            <h3>{Number(yearFlightHours / (60 * 60)).toLocaleString('en')}</h3> Flight Hours This Year<br></br>\n                                        </div>\n\n                                        <div className = \"col-sm-4\">\n                                            <h3>{Number(yearNumberFlights).toLocaleString('en')}</h3> Flights This Year<br></br>\n                                        </div>\n                                    </div>\n\n                                    <hr></hr>\n                                    <div className=\"row\">\n                                        <div className = \"col-sm-4\">\n                                            <h3>{Number(monthFlightHours / (60 * 60)).toLocaleString('en')}</h3> Flight Hours (Last 30 Days)<br></br>\n                                        </div>\n\n                                        <div className = \"col-sm-4\">\n                                            <h3>{Number(monthNumberFlights).toLocaleString('en')}</h3> Flights (Last 30 Days)<br></br>\n                                        </div>\n                                    </div>\n\n                                </div>\n                            </div>\n                        </div>\n\n                        <div className=\"col-lg-6\" style={{paddingLeft:\"0\"}}>\n                            <div className=\"card mb-2 m-2\" style={{background : \"rgba(248,259,250,0.8)\"}}>\n                                <h4 className=\"card-header\" style={{color : \"rgba(75,75,75,250)\"}}>Events</h4>\n                                <div className=\"card-body\">\n                                    <div className=\"row\">\n                                        <div className = \"col-sm-4\">\n                                            <h3>{Number(totalEvents).toLocaleString('en')}</h3> Total Events<br></br>\n                                        </div>\n\n                                        <div className = \"col-sm-4\">\n                                            <h3>{Number(yearEvents).toLocaleString('en')}</h3> Events This Year<br></br>\n                                        </div>\n\n                                        <div className = \"col-sm-4\">\n                                            <h3>{Number(monthEvents).toLocaleString('en')}</h3> Events This Month<br></br>\n                                        </div>\n\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div className=\"card mb-2 m-2\" style={{background : \"rgba(248,259,250,0.8)\"}}>\n                                <h4 className=\"card-header\" style={{color : \"rgba(75,75,75,250)\"}}>Participation</h4>\n                                <div className=\"card-body\">\n                                    <div className=\"row\">\n                                        <div className = \"col-sm-4\">\n                                            <h3>{numberFleets}</h3> Fleets <br></br>\n                                        </div>\n\n                                        <div className = \"col-sm-4\">\n                                            <h3>{numberUsers}</h3> Users<br></br>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div className=\"row\">\n                        <div className=\"col-lg-12\">\n                            <div className=\"card mb-2 m-2\" style={{background : \"rgba(248,259,250,0.8)\"}}>\n                                <TimeHeader\n                                    name=\"Events\"\n                                    airframes={airframes}\n                                    airframe={this.state.airframe}\n                                    startYear={this.state.startYear} \n                                    startMonth={this.state.startMonth} \n                                    endYear={this.state.endYear} \n                                    endMonth={this.state.endMonth} \n                                    datesChanged={this.state.datesChanged}\n                                    dateChange={() => this.dateChange()}\n                                    airframeChange={(airframe) => this.airframeChange(airframe)}\n                                    updateStartYear={(newStartYear) => this.updateStartYear(newStartYear)}\n                                    updateStartMonth={(newStartMonth) => this.updateStartMonth(newStartMonth)}\n                                    updateEndYear={(newEndYear) => this.updateEndYear(newEndYear)}\n                                    updateEndMonth={(newEndMonth) => this.updateEndMonth(newEndMonth)}\n                                />\n\n                            <div className=\"card-body\" style={{padding:\"0\"}}>\n                                <div className=\"row\" style={{margin:\"0\"}}>\n                                    <div className=\"col-lg-6\" style={{padding:\"0 8 0 0\"}}>\n                                        <div id=\"event-counts-plot\"></div>\n                                    </div>\n                                    <div className=\"col-lg-6\" style={{padding:\"0 0 0 8\"}}>\n                                        <div id=\"event-percents-plot\"></div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        );\n    }\n}\n\n\nvar aggregatePage = ReactDOM.render(\n    <AggregatePage/>,\n    document.querySelector('#aggregate-page')\n);\n\ndisplayPlots(\"All Airframes\");\n\n\n"],"mappings":"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"}]}