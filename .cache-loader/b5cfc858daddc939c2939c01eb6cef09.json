{"remainingRequest":"/ngafid/ngafid2.0/node_modules/babel-loader/lib/index.js??ruleSet[1].rules[0].use[1]!/ngafid/ngafid2.0/src/main/javascript/flight.js","dependencies":[{"path":"/ngafid/ngafid2.0/src/main/javascript/flight.js","mtime":1664810261290},{"path":"/ngafid/ngafid2.0/.babelrc","mtime":1664810261182},{"path":"/ngafid/ngafid2.0/node_modules/cache-loader/dist/cjs.js","mtime":1664910647113},{"path":"/ngafid/ngafid2.0/node_modules/babel-loader/lib/index.js","mtime":1664910647213}],"contextDependencies":[],"result":["function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nconsole.log('importing stuff!');\nimport 'bootstrap';\nimport React, { Component } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport SignedInNavbar from \"./signed_in_navbar.js\";\nimport { map, styles, layers, Colors, initializeMap } from \"./map.js\";\nimport { Group, Vector as VectorLayer } from 'ol/layer.js';\nimport { Vector as VectorSource } from 'ol/source.js';\nimport { Circle, Fill, Icon, Stroke, Style } from 'ol/style.js';\nimport { FlightsCard } from './flights_card_component.js';\nimport Plotly from 'plotly.js';\nglobal.plotlyLayout = {\n  shapes: []\n};\n\nfunction invalidString(str) {\n  return str == null || str.length < 0 || /^\\s*$/.test(str);\n}\n\nvar FlightPage = /*#__PURE__*/function (_React$Component) {\n  _inherits(FlightPage, _React$Component);\n\n  var _super = _createSuper(FlightPage);\n\n  function FlightPage(props) {\n    var _this;\n\n    _classCallCheck(this, FlightPage);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      filterVisible: false,\n      //filterSelected : false,\n      plotVisible: false,\n      plotSelected: false,\n      mapVisible: false,\n      mapSelected: false,\n      mapStyle: \"Road\",\n      filterRef: /*#__PURE__*/React.createRef(),\n      flightsRef: /*#__PURE__*/React.createRef(),\n      navRef: /*#__PURE__*/React.createRef(),\n      flights: flights //start out with the provided flight\n\n    };\n    return _this;\n  }\n\n  _createClass(FlightPage, [{\n    key: \"mapSelectChanged\",\n    value: function mapSelectChanged(style) {\n      for (var i = 0, ii = layers.length; i < ii; ++i) {\n        console.log(\"setting layer \" + i + \" to:\" + (styles[i] === style));\n        layers[i].setVisible(styles[i] === style);\n      }\n\n      console.log(\"map style changed to: '\" + style + \"'!\");\n      this.setState({\n        mapStyle: style\n      });\n    }\n  }, {\n    key: \"setAvailableLayers\",\n    value: function setAvailableLayers(plotLayers) {\n      console.log(\"changing selectable layers on navbar\");\n      console.log(plotLayers);\n      this.setState({\n        selectableLayers: plotLayers\n      });\n    }\n  }, {\n    key: \"showMap\",\n    value: function showMap() {\n      if (this.state.mapVisible) return;\n\n      if (!$(\"#map-toggle-button\").hasClass(\"active\")) {\n        $(\"#map-toggle-button\").addClass(\"active\");\n        $(\"#map-toggle-button\").attr(\"aria-pressed\", true);\n      }\n\n      this.state.mapVisible = true;\n      this.setState(this.state);\n      $(\"#plot-map-div\").css(\"height\", \"50%\");\n      $(\"#map\").show();\n\n      if (this.state.plotVisible) {\n        $(\"#map\").css(\"width\", \"50%\");\n        map.updateSize();\n        $(\"#plot\").css(\"width\", \"50%\");\n        Plotly.Plots.resize(\"plot\");\n      } else {\n        $(\"#map\").css(\"width\", \"100%\");\n        map.updateSize();\n      }\n    }\n  }, {\n    key: \"hideMap\",\n    value: function hideMap() {\n      if (!this.state.mapVisible) return;\n\n      if ($(\"#map-toggle-button\").hasClass(\"active\")) {\n        $(\"#map-toggle-button\").removeClass(\"active\");\n        $(\"#map-toggle-button\").attr(\"aria-pressed\", false);\n      }\n\n      this.state.mapVisible = false;\n      this.setState(this.state);\n      $(\"#map\").hide();\n\n      if (this.state.plotVisible) {\n        $(\"#plot\").css(\"width\", \"100%\");\n        var update = {\n          width: \"100%\"\n        };\n        Plotly.Plots.resize(\"plot\");\n      } else {\n        $(\"#plot-map-div\").css(\"height\", \"0%\");\n      }\n    }\n  }, {\n    key: \"toggleMap\",\n    value: function toggleMap() {\n      if (this.state.mapVisible) {\n        this.hideMap();\n      } else {\n        this.showMap();\n      }\n    }\n  }, {\n    key: \"showPlot\",\n    value: function showPlot() {\n      if (this.state.plotVisible) return;\n\n      if (!$(\"#plot-toggle-button\").hasClass(\"active\")) {\n        $(\"#plot-toggle-button\").addClass(\"active\");\n        $(\"#plot-toggle-button\").attr(\"aria-pressed\", true);\n      }\n\n      this.state.plotVisible = true;\n      this.setState(this.state);\n      $(\"#plot\").show();\n      $(\"#plot-map-div\").css(\"height\", \"50%\");\n\n      if (this.state.mapVisible) {\n        $(\"#map\").css(\"width\", \"50%\");\n        map.updateSize();\n        $(\"#plot\").css(\"width\", \"50%\");\n        Plotly.Plots.resize(\"plot\");\n      } else {\n        $(\"#plot\").css(\"width\", \"100%\");\n        Plotly.Plots.resize(\"plot\");\n      }\n    }\n  }, {\n    key: \"hidePlot\",\n    value: function hidePlot() {\n      if (!this.state.plotVisible) return;\n\n      if ($(\"#plot-toggle-button\").hasClass(\"active\")) {\n        $(\"#plot-toggle-button\").removeClass(\"active\");\n        $(\"#plot-toggle-button\").attr(\"aria-pressed\", false);\n      }\n\n      this.state.plotVisible = false;\n      this.setState(this.state);\n      $(\"#plot\").hide();\n\n      if (this.state.mapVisible) {\n        $(\"#map\").css(\"width\", \"100%\");\n        map.updateSize();\n      } else {\n        $(\"#plot-map-div\").css(\"height\", \"0%\");\n      }\n    }\n  }, {\n    key: \"togglePlot\",\n    value: function togglePlot() {\n      if (this.state.plotVisible) {\n        this.hidePlot();\n      } else {\n        this.showPlot();\n      }\n    }\n  }, {\n    key: \"toggleFilter\",\n    value: function toggleFilter() {\n      console.log(\"toggling filterVisible to: \" + !this.state.filterVisible);\n      this.setState({\n        filterVisible: !this.state.filterVisible\n      });\n    }\n  }, {\n    key: \"submitFilter\",\n    value: function submitFilter() {\n      console.log(\"submitting filter! currentPage: \" + this.state.currentPage + \", itemsPerPage: \" + this.state.itemsPerPage);\n      this.flightsRef.submitFilter(this.state.currentPage, this.state.itemsPerPage);\n    }\n  }, {\n    key: \"getQuery\",\n    value: function getQuery() {\n      console.log(\"getting query!\");\n      return this.filterRef.getQuery();\n    }\n  }, {\n    key: \"addTag\",\n    value: function addTag(flightId, name, description, color) {\n      if (invalidString(name) || invalidString(description)) {\n        errorModal.show(\"Error creating tag!\", \"Please ensure the name and description fields are correctly filled out!\");\n        return;\n      }\n\n      var submissionData = {\n        name: name,\n        description: description,\n        color: color,\n        id: flightId\n      };\n      console.log(\"Creating a new tag for flight # \" + this.state.flightId);\n      var thisFlight = this;\n      $.ajax({\n        type: 'POST',\n        url: '/protected/create_tag',\n        data: submissionData,\n        dataType: 'json',\n        success: function success(response) {\n          console.log(\"received response: \");\n          console.log(response);\n\n          if (response != \"ALREADY_EXISTS\") {\n            for (var i = 0; i < thisFlight.state.flights.length; i++) {\n              var flight = thisFlight.state.flights[i];\n\n              if (flight.id == flightId) {\n                if (flight.tags != null && flight.tags.length > 0) {\n                  flight.tags.push(response);\n                } else {\n                  flight.tags = [response];\n                }\n              }\n            }\n\n            thisFlight.setState(thisFlight.state);\n          } else {\n            errorModal.show(\"Error creating tag\", \"A tag with that name already exists! Use the dropdown menu to associate it with this flight or give this tag another name\");\n          }\n        },\n        error: function error(jqXHR, textStatus, errorThrown) {},\n        async: true\n      });\n    }\n    /**\n     * Calls the server using ajax-json to notify it of the new tag change\n     */\n\n  }, {\n    key: \"editTag\",\n    value: function editTag(newTag, currentTag) {\n      console.log(\"submitting edit for tag: \" + currentTag.hashId);\n      console.log(\"current tag\");\n      console.log(currentTag);\n      console.log(\"new tag\");\n      console.log(newTag);\n      var submissionData = {\n        tag_id: currentTag.hashId,\n        name: newTag.name,\n        description: newTag.description,\n        color: newTag.color\n      };\n      var thisFlight = this;\n      $.ajax({\n        type: 'POST',\n        url: '/protected/edit_tag',\n        data: submissionData,\n        dataType: 'json',\n        success: function success(response) {\n          console.log(\"received response: \");\n          console.log(response);\n\n          if (response != \"NOCHANGE\") {\n            console.log(\"tag was edited!\");\n\n            for (var i = 0; i < thisFlight.state.flights.length; i++) {\n              var flight = thisFlight.state.flights[i];\n              console.log(flight);\n              console.log(currentTag);\n\n              if (flight.tags != null && flight.tags.length > 0) {\n                var tags = flight.tags;\n\n                for (var j = 0; j < tags.length; j++) {\n                  var _tag = tags[j];\n\n                  if (_tag.hashId == currentTag.hashId) {\n                    tags[j] = response;\n                  }\n                }\n              }\n            }\n\n            thisFlight.setState(thisFlight.state);\n          } else {\n            thisFlight.showNoEditError();\n          }\n\n          thisFlight.setState(thisFlight.state);\n        },\n        error: function error(jqXHR, textStatus, errorThrown) {},\n        async: true\n      });\n    }\n  }, {\n    key: \"getUnassociatedTags\",\n    value: function getUnassociatedTags(flightId) {\n      console.log(\"getting unassociated tags!\");\n      var tags = [];\n      var submissionData = {\n        id: flightId\n      };\n      $.ajax({\n        type: 'POST',\n        url: '/protected/get_unassociated_tags',\n        data: submissionData,\n        dataType: 'json',\n        success: function success(response) {\n          console.log(\"received response: \");\n          console.log(response);\n          tags = response;\n        },\n        error: function error(jqXHR, textStatus, errorThrown) {},\n        async: false\n      });\n      return tags;\n    }\n    /**\n     * Handles when the user presses the delete button, and prompts them with @module confirmModal\n     */\n\n  }, {\n    key: \"deleteTag\",\n    value: function deleteTag(flightId, tagId) {\n      var _this2 = this;\n\n      console.log(tag);\n\n      if (tagId != null) {\n        console.log(\"delete tag invoked!\");\n        confirmModal.show(\"Confirm Delete Tag: '\" + tag.name + \"'\", \"Are you sure you wish to delete this tag?\\n\\nThis operation will remove it from this flight as well as all other flights that this tag is associated with. This operation cannot be undone!\", function () {\n          _this2.removeTag(flightId, tagId, true);\n        });\n      } else {\n        errorModal.show(\"Please select a tag to delete first!\", \"You did not select a tag to delete\");\n      }\n    }\n    /**\n     * removes a tag from a flight, either permanent or just from one flight\n     * @param id the tagid of the tag being removed\n     * @param tag is the tag being removed\n     * @param isPermanent a bool representing whether or not the removal is permanent\n     */\n\n  }, {\n    key: \"removeTag\",\n    value: function removeTag(flightId, tagId, isPermanent) {\n      console.log(\"un-associating tag #\" + tagId + \" with flight #\" + flightId);\n\n      if (tagId == null || tagId == -1) {\n        errorModal.show(\"Please select a flight to remove first!\", \"Cannot remove any flights!\");\n        return;\n      }\n\n      var submissionData = {\n        flight_id: flightId,\n        tag_id: tagId,\n        permanent: isPermanent,\n        all: tagId == -2\n      };\n      var thisFlight = this;\n      console.log(\"calling deletion ajax\");\n      $.ajax({\n        type: 'POST',\n        url: '/protected/remove_tag',\n        data: submissionData,\n        dataType: 'json',\n        success: function success(response) {\n          console.log(\"received response: \");\n          console.log(response);\n\n          if (isPermanent) {\n            console.log(\"permanent deletion of tag with id: \" + tagId);\n\n            for (var i = 0; i < thisFlight.state.flights.length; i++) {\n              var flight = thisFlight.state.flights[i];\n              console.log(flight);\n\n              if (flight.tags != null) {\n                var tags = flight.tags;\n\n                for (var j = 0; j < tags.length; j++) {\n                  var _tag2 = tags[j];\n\n                  if (tagId == response.tagId) {\n                    tags.splice(j, 1);\n                  }\n                }\n              }\n            }\n          } else if (response.allTagsCleared) {\n            for (var i = 0; i < thisFlight.state.flights.length; i++) {\n              var _flight = thisFlight.state.flights[i];\n\n              if (_flight.id == flightId) {\n                _flight.tags = [];\n              }\n            }\n          } else {\n            for (var i = 0; i < thisFlight.state.flights.length; i++) {\n              var _flight2 = thisFlight.state.flights[i];\n              var _tags = _flight2.tags;\n\n              if (_flight2.id == flightId) {\n                var _tags2 = _flight2.tags;\n\n                _tags2.splice(_tags2.indexOf(tag), 1);\n              }\n            }\n          }\n\n          thisFlight.setState(thisFlight.state);\n        },\n        error: function error(jqXHR, textStatus, errorThrown) {},\n        async: false\n      });\n    }\n    /**\n     * Associates a tag with this flight\n     * @param id the tag id to associate\n     */\n\n  }, {\n    key: \"associateTag\",\n    value: function associateTag(tagId, flightId) {\n      console.log(\"associating tag #\" + tagId + \" with flight #\" + flightId);\n      var submissionData = {\n        id: flightId,\n        tag_id: tagId\n      };\n      var thisFlight = this;\n      $.ajax({\n        type: 'POST',\n        url: '/protected/associate_tag',\n        data: submissionData,\n        dataType: 'json',\n        success: function success(response) {\n          console.log(\"received response: \");\n          console.log(response);\n\n          for (var i = 0; i < thisFlight.state.flights.length; i++) {\n            var flight = thisFlight.state.flights[i];\n\n            if (flight.id == flightId) {\n              if (flight.tags != null && flight.tags.length > 0) {\n                flight.tags.push(response);\n              } else {\n                flight.tags = [response];\n              }\n            }\n          }\n\n          thisFlight.setState(thisFlight.state);\n        },\n        error: function error(jqXHR, textStatus, errorThrown) {},\n        async: true\n      });\n    }\n    /**\n     * Handles when the user presses the clear all tags button, and prompts them with @module confirmModal\n     */\n\n  }, {\n    key: \"clearTags\",\n    value: function clearTags(flightId) {\n      var _this3 = this;\n\n      confirmModal.show(\"Confirm action\", \"Are you sure you would like to remove all the tags from flight #\" + flightId + \"?\", function () {\n        _this3.removeTag(flightId, -2, false);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this,\n          _React$createElement;\n\n      var style = null;\n\n      if (this.state.mapVisible || this.state.plotVisible) {\n        console.log(\"rendering half\");\n        style = {\n          overflow: \"scroll\",\n          height: \"calc(50%)\"\n        };\n      } else {\n        style = {\n          overflow: \"scroll\",\n          height: \"calc(100%)\"\n        };\n      }\n\n      style.padding = \"5\";\n      return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(SignedInNavbar, {\n        activePage: \"flights\",\n        filterVisible: this.state.filterVisible,\n        plotVisible: this.state.plotVisible,\n        mapVisible: this.state.mapVisible,\n        filterSelected: this.state.filterSelected,\n        plotSelected: this.state.plotSelected,\n        mapSelected: this.state.mapSelected,\n        mapStyle: this.state.mapStyle,\n        togglePlot: function togglePlot() {\n          return _this4.togglePlot();\n        },\n        toggleFilter: function toggleFilter() {\n          return _this4.toggleFilter();\n        },\n        toggleMap: function toggleMap() {\n          return _this4.toggleMap();\n        },\n        mapSelectChanged: function mapSelectChanged(style) {\n          return _this4.mapSelectChanged(style);\n        },\n        waitingUserCount: waitingUserCount,\n        fleetManager: fleetManager,\n        ref: function ref(elem) {\n          return _this4.navRef = elem;\n        },\n        unconfirmedTailsCount: unconfirmedTailsCount,\n        modifyTailsAccess: modifyTailsAccess\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"plot-map-div\",\n        className: \"row m-0\",\n        style: {\n          width: \"100%\",\n          height: \"0%\"\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"map\",\n        className: \"map\",\n        style: {\n          width: \"50%\",\n          display: \"none\"\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"plot\",\n        style: {\n          width: \"50%\",\n          display: \"none\"\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        style: style\n      }, /*#__PURE__*/React.createElement(FlightsCard, (_React$createElement = {\n        parent: this,\n        flights: this.state.flights,\n        navBar: this.navRef,\n        ref: function ref(elem) {\n          return _this4.flightsRef = elem;\n        },\n        showMap: function showMap() {\n          _this4.showMap();\n        },\n        showPlot: function showPlot() {\n          _this4.showPlot();\n        },\n        getFilterQuery: function getFilterQuery() {\n          return _this4.getQuery();\n        }\n      }, _defineProperty(_React$createElement, \"flights\", this.state.flights), _defineProperty(_React$createElement, \"setAvailableLayers\", function setAvailableLayers(plotLayers) {\n        _this4.setAvailableLayers(plotLayers);\n      }), _defineProperty(_React$createElement, \"setFlights\", function setFlights(flights) {\n        _this4.setState({\n          flights: flights\n        });\n      }), _defineProperty(_React$createElement, \"addTag\", function addTag(flightId, name, description, color) {\n        return _this4.addTag(flightId, name, description, color);\n      }), _defineProperty(_React$createElement, \"removeTag\", function removeTag(flightId, tagId, perm) {\n        return _this4.removeTag(flightId, tagId, perm);\n      }), _defineProperty(_React$createElement, \"deleteTag\", function deleteTag(flightId, tagId) {\n        return _this4.deleteTag(flightId, tagId);\n      }), _defineProperty(_React$createElement, \"getUnassociatedTags\", function getUnassociatedTags(flightId) {\n        return _this4.getUnassociatedTags(flightId);\n      }), _defineProperty(_React$createElement, \"associateTag\", function associateTag(tagId, flightId) {\n        return _this4.associateTag(tagId, flightId);\n      }), _defineProperty(_React$createElement, \"clearTags\", function clearTags(flightId) {\n        return _this4.clearTags(flightId);\n      }), _defineProperty(_React$createElement, \"editTag\", function editTag(currentTag, newTag) {\n        return _this4.editTag(currentTag, newTag);\n      }), _React$createElement))));\n    }\n  }]);\n\n  return FlightPage;\n}(React.Component);\n\nconsole.log(\"trying to render FlightPage\");\nvar flightPage = ReactDOM.render( /*#__PURE__*/React.createElement(FlightPage, null), document.querySelector('#flight-page'));\nconsole.log(\"rendered flightsCard!\"); //need to wait for the page to load before initializing maps\n//TODO: this is the same as in flights.js, put it in a single spot\n\n$(document).ready(function () {\n  Plotly.newPlot('plot', [], global.plotlyLayout);\n  initializeMap();\n  var myPlot = document.getElementById(\"plot\");\n  console.log(\"myPlot:\");\n  console.log(myPlot);\n  myPlot.on('plotly_hover', function (data) {\n    var xaxis = data.points[0].xaxis,\n        yaxis = data.points[0].yaxis;\n    /*\n        var infotext = data.points.map(function(d) {\n            return ('width: '+xaxis.l2p(d.x)+', height: '+yaxis.l2p(d.y));\n        });\n        */\n\n    console.log(\"in hover!\");\n    console.log(data);\n    var x = data.points[0].x; //let x = data.points[0].pointIndex;\n    //console.log(\"x: \" + x);\n\n    map.getLayers().forEach(function (layer) {\n      if (layer instanceof VectorLayer) {\n        if ('flightState' in layer) {\n          //console.log(\"VECTOR layer:\");\n          var hiddenStyle = new Style({\n            stroke: new Stroke({\n              color: layer.flightState.state.color,\n              width: 1.5\n            }),\n            image: new Circle({\n              radius: 5,\n              stroke: new Stroke({\n                color: [0, 0, 0, 0],\n                width: 2\n              })\n            })\n          });\n          var visibleStyle = new Style({\n            stroke: new Stroke({\n              color: layer.flightState.state.color,\n              width: 1.5\n            }),\n            image: new Circle({\n              radius: 5,\n              stroke: new Stroke({\n                color: layer.flightState.state.color,\n                width: 2\n              })\n            })\n          });\n\n          if (layer.getVisible()) {\n            if (x < layer.flightState.state.points.length) {\n              console.log(\"need to draw point at: \" + layer.flightState.state.points[x]);\n              layer.flightState.state.trackingPoint.setStyle(visibleStyle);\n              layer.flightState.state.trackingPoint.getGeometry().setCoordinates(layer.flightState.state.points[x]);\n            } else {\n              console.log(\"not drawing point x: \" + x + \" >= points.length: \" + layer.flightState.state.points.length);\n              layer.flightState.state.trackingPoint.setStyle(hiddenStyle);\n            }\n          }\n        }\n      }\n    });\n  });\n});",{"version":3,"names":["console","log","React","Component","ReactDOM","SignedInNavbar","map","styles","layers","Colors","initializeMap","Group","Vector","VectorLayer","VectorSource","Circle","Fill","Icon","Stroke","Style","FlightsCard","Plotly","global","plotlyLayout","shapes","invalidString","str","length","test","FlightPage","props","state","filterVisible","plotVisible","plotSelected","mapVisible","mapSelected","mapStyle","filterRef","createRef","flightsRef","navRef","flights","style","i","ii","setVisible","setState","plotLayers","selectableLayers","$","hasClass","addClass","attr","css","show","updateSize","Plots","resize","removeClass","hide","update","width","hideMap","showMap","hidePlot","showPlot","currentPage","itemsPerPage","submitFilter","getQuery","flightId","name","description","color","errorModal","submissionData","id","thisFlight","ajax","type","url","data","dataType","success","response","flight","tags","push","error","jqXHR","textStatus","errorThrown","async","newTag","currentTag","hashId","tag_id","j","tag","showNoEditError","tagId","confirmModal","removeTag","isPermanent","flight_id","permanent","all","splice","allTagsCleared","indexOf","overflow","height","padding","filterSelected","togglePlot","toggleFilter","toggleMap","mapSelectChanged","waitingUserCount","fleetManager","elem","unconfirmedTailsCount","modifyTailsAccess","display","setAvailableLayers","addTag","perm","deleteTag","getUnassociatedTags","associateTag","clearTags","editTag","flightPage","render","document","querySelector","ready","newPlot","myPlot","getElementById","on","xaxis","points","yaxis","x","getLayers","forEach","layer","hiddenStyle","stroke","flightState","image","radius","visibleStyle","getVisible","trackingPoint","setStyle","getGeometry","setCoordinates"],"sources":["/ngafid/ngafid2.0/src/main/javascript/flight.js"],"sourcesContent":["console.log('importing stuff!');\n\nimport 'bootstrap';\nimport React, { Component } from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport SignedInNavbar from \"./signed_in_navbar.js\";\nimport { map, styles, layers, Colors, initializeMap } from \"./map.js\";\n\nimport {Group, Vector as VectorLayer} from 'ol/layer.js';\nimport {Vector as VectorSource} from 'ol/source.js';\nimport {Circle, Fill, Icon, Stroke, Style} from 'ol/style.js';\n\nimport { FlightsCard } from './flights_card_component.js';\n\nimport Plotly from 'plotly.js';\n\nglobal.plotlyLayout = { \n    shapes : []\n};\n\nfunction invalidString(str) {\n    return (str == null || str.length < 0 || /^\\s*$/.test(str));\n}\n\nclass FlightPage extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            filterVisible : false,\n            //filterSelected : false,\n            plotVisible : false,\n            plotSelected : false,\n            mapVisible : false,\n            mapSelected : false,\n            mapStyle : \"Road\",\n            filterRef : React.createRef(),\n            flightsRef : React.createRef(),\n            navRef : React.createRef(),\n            flights : flights, //start out with the provided flight\n        };\n\n\n    }\n\n    mapSelectChanged(style) {\n        for (var i = 0, ii = layers.length; i < ii; ++i) {\n            console.log(\"setting layer \" + i + \" to:\" + (styles[i] === style));\n            layers[i].setVisible(styles[i] === style);\n        }   \n\n        console.log(\"map style changed to: '\" +  style + \"'!\");\n        this.setState({\n            mapStyle : style\n        });\n    }\n\n    setAvailableLayers(plotLayers) {\n        console.log(\"changing selectable layers on navbar\");\n        console.log(plotLayers);\n\n        this.setState({selectableLayers : plotLayers});\n    }\n\n    showMap() {\n        if (this.state.mapVisible) return;\n\n        if ( !$(\"#map-toggle-button\").hasClass(\"active\") ) { \n            $(\"#map-toggle-button\").addClass(\"active\");\n            $(\"#map-toggle-button\").attr(\"aria-pressed\", true);\n        }\n\n        this.state.mapVisible = true;\n        this.setState(this.state);\n\n        $(\"#plot-map-div\").css(\"height\", \"50%\");\n        $(\"#map\").show();\n\n        if (this.state.plotVisible) {\n            $(\"#map\").css(\"width\", \"50%\");\n            map.updateSize();\n            $(\"#plot\").css(\"width\", \"50%\");\n            Plotly.Plots.resize(\"plot\");\n        } else {\n            $(\"#map\").css(\"width\", \"100%\");\n            map.updateSize();\n        }\n\n    }\n\n    hideMap() {\n        if (!this.state.mapVisible) return;\n\n        if ( $(\"#map-toggle-button\").hasClass(\"active\") ) { \n            $(\"#map-toggle-button\").removeClass(\"active\");\n            $(\"#map-toggle-button\").attr(\"aria-pressed\", false);\n        }   \n\n        this.state.mapVisible = false;\n        this.setState(this.state);\n\n        $(\"#map\").hide();\n\n        if (this.state.plotVisible) {\n            $(\"#plot\").css(\"width\", \"100%\");\n            var update = { width : \"100%\" };\n            Plotly.Plots.resize(\"plot\");\n        } else {\n            $(\"#plot-map-div\").css(\"height\", \"0%\");\n        }\n    }\n\n    toggleMap() {\n        if (this.state.mapVisible) {\n            this.hideMap();\n        } else {\n            this.showMap();\n        }\n    }\n\n    showPlot() {\n        if (this.state.plotVisible) return;\n\n        if ( !$(\"#plot-toggle-button\").hasClass(\"active\") ) { \n            $(\"#plot-toggle-button\").addClass(\"active\");\n            $(\"#plot-toggle-button\").attr(\"aria-pressed\", true);\n        }\n\n        this.state.plotVisible = true;\n        this.setState(this.state);\n\n        $(\"#plot\").show();\n        $(\"#plot-map-div\").css(\"height\", \"50%\");\n\n        if (this.state.mapVisible) {\n            $(\"#map\").css(\"width\", \"50%\");\n            map.updateSize();\n            $(\"#plot\").css(\"width\", \"50%\");\n            Plotly.Plots.resize(\"plot\");\n        } else {\n            $(\"#plot\").css(\"width\", \"100%\");\n            Plotly.Plots.resize(\"plot\");\n        }\n    }\n\n    hidePlot() {\n        if (!this.state.plotVisible) return;\n\n        if ( $(\"#plot-toggle-button\").hasClass(\"active\") ) { \n            $(\"#plot-toggle-button\").removeClass(\"active\");\n            $(\"#plot-toggle-button\").attr(\"aria-pressed\", false);\n        }   \n\n        this.state.plotVisible = false;\n        this.setState(this.state);\n\n        $(\"#plot\").hide();\n\n        if (this.state.mapVisible) {\n            $(\"#map\").css(\"width\", \"100%\");\n            map.updateSize();\n        } else {\n            $(\"#plot-map-div\").css(\"height\", \"0%\");\n        }\n    }\n\n    togglePlot() {\n        if (this.state.plotVisible) {\n            this.hidePlot();\n        } else {\n            this.showPlot();\n        }\n    }\n\n\n    toggleFilter() {\n        console.log(\"toggling filterVisible to: \" + !this.state.filterVisible);\n        this.setState({\n            filterVisible : !this.state.filterVisible\n        });\n    }\n\n    submitFilter() {\n        console.log(\"submitting filter! currentPage: \" + this.state.currentPage + \", itemsPerPage: \" + this.state.itemsPerPage);\n        this.flightsRef.submitFilter(this.state.currentPage, this.state.itemsPerPage);\n    }\n\n    getQuery() {\n        console.log(\"getting query!\");\n        return this.filterRef.getQuery();\n    }\n\n    addTag(flightId, name, description, color) {\n        if (invalidString(name) || invalidString(description)) {\n            errorModal.show(\"Error creating tag!\",\n                            \"Please ensure the name and description fields are correctly filled out!\");\n            return;\n        }\n\n        var submissionData = {\n            name : name,\n            description : description,\n            color : color,\n            id : flightId\n        };\n        console.log(\"Creating a new tag for flight # \" + this.state.flightId);\n\n        let thisFlight = this;\n\n        $.ajax({\n            type: 'POST',\n            url: '/protected/create_tag',\n            data : submissionData,\n            dataType : 'json',\n            success : function(response) {\n                console.log(\"received response: \");\n                console.log(response);\n                if (response != \"ALREADY_EXISTS\") {\n                    for (var i = 0; i < thisFlight.state.flights.length; i++) {\n                        let flight = thisFlight.state.flights[i];\n                        if (flight.id == flightId) {\n                            if (flight.tags != null && flight.tags.length > 0) {\n                                flight.tags.push(response);\n                            } else {\n                                flight.tags = [response];\n                            }\n                        }\n                    }\n                    thisFlight.setState(thisFlight.state);\n                } else {\n                    errorModal.show(\"Error creating tag\", \"A tag with that name already exists! Use the dropdown menu to associate it with this flight or give this tag another name\");\n                }\n            },   \n            error : function(jqXHR, textStatus, errorThrown) {\n            },   \n            async: true \n        });  \n    }\n\n    /**\n     * Calls the server using ajax-json to notify it of the new tag change\n     */\n    editTag(newTag, currentTag) {\n        console.log(\"submitting edit for tag: \"+currentTag.hashId);\n\n        console.log(\"current tag\");\n        console.log(currentTag);\n\n        console.log(\"new tag\");\n        console.log(newTag);\n\n        var submissionData = {\n            tag_id : currentTag.hashId,\n            name : newTag.name,\n            description : newTag.description,\n            color : newTag.color\n        };\n\n        let thisFlight = this;\n\n        $.ajax({\n            type: 'POST',\n            url: '/protected/edit_tag',\n            data : submissionData,\n            dataType : 'json',\n            success : function(response) {\n                console.log(\"received response: \");\n                console.log(response);\n                if (response != \"NOCHANGE\") {\n                    console.log(\"tag was edited!\");\n\n                    for (var i = 0; i < thisFlight.state.flights.length; i++) {\n                        let flight = thisFlight.state.flights[i];\n                        console.log(flight);\n                        console.log(currentTag);\n                        if (flight.tags != null && flight.tags.length > 0) {\n                            let tags = flight.tags;\n                            for (var j = 0; j < tags.length; j++) {\n                                let tag = tags[j];\n                                if (tag.hashId == currentTag.hashId) {\n                                    tags[j] = response;\n                                }\n                            }\n                        }\n                    } \n                    thisFlight.setState(thisFlight.state);\n                } else {\n                    thisFlight.showNoEditError();\n                }\n                thisFlight.setState(thisFlight.state);\n            },\n            error : function(jqXHR, textStatus, errorThrown) {\n            },\n            async: true\n        });\n    }\n\n    getUnassociatedTags(flightId) {\n        console.log(\"getting unassociated tags!\")\n\n        let tags = [];\n\n        var submissionData = {\n            id : flightId\n        };\n\n        $.ajax({\n            type: 'POST',\n            url: '/protected/get_unassociated_tags',\n            data : submissionData,\n            dataType : 'json',\n            success : function(response) {\n                console.log(\"received response: \");\n                console.log(response);\n\n                tags = response;\n            },   \n            error : function(jqXHR, textStatus, errorThrown) {\n            },   \n            async: false \n        });  \n\n        return tags;\n    }\n\n    /**\n     * Handles when the user presses the delete button, and prompts them with @module confirmModal\n     */\n    deleteTag(flightId, tagId) {\n        console.log(tag);\n        if (tagId != null) {\n            console.log(\"delete tag invoked!\");\n            confirmModal.show(\"Confirm Delete Tag: '\" + tag.name + \"'\",\n                \"Are you sure you wish to delete this tag?\\n\\nThis operation will remove it from this flight as well as all other flights that this tag is associated with. This operation cannot be undone!\",\n                () => {this.removeTag(flightId, tagId, true)}\n            );\n        } else {\n            errorModal.show(\"Please select a tag to delete first!\",\n                            \"You did not select a tag to delete\");\n        }\n\n    }\n\n    /**\n     * removes a tag from a flight, either permanent or just from one flight\n     * @param id the tagid of the tag being removed\n     * @param tag is the tag being removed\n     * @param isPermanent a bool representing whether or not the removal is permanent\n     */\n    removeTag(flightId, tagId, isPermanent) {\n        console.log(\"un-associating tag #\" + tagId + \" with flight #\" + flightId);\n\n        if (tagId == null || tagId == -1) {\n            errorModal.show(\"Please select a flight to remove first!\", \"Cannot remove any flights!\");\n            return;\n        }\n\n        var submissionData = {\n            flight_id : flightId,\n            tag_id : tagId,\n            permanent : isPermanent,\n            all : (tagId == -2)\n        };\n\n        let thisFlight = this;\n        console.log(\"calling deletion ajax\");\n\n        $.ajax({\n            type: 'POST',\n            url: '/protected/remove_tag',\n            data : submissionData,\n            dataType : 'json',\n            success : function(response) {\n                console.log(\"received response: \");\n                console.log(response);\n                if (isPermanent) {\n                    console.log(\"permanent deletion of tag with id: \" + tagId);\n                    for (var i = 0; i < thisFlight.state.flights.length; i++) {\n                        let flight = thisFlight.state.flights[i];\n                        console.log(flight);\n                        if (flight.tags != null) {\n                            let tags = flight.tags;\n                            for (var j = 0; j < tags.length; j++) {\n                                let tag = tags[j];\n                                if (tagId == response.tagId) {\n                                    tags.splice(j, 1);\n                                }\n                            }\n                        }\n                    } \n                } else if (response.allTagsCleared) {\n                    for (var i = 0; i < thisFlight.state.flights.length; i++) {\n                        let flight = thisFlight.state.flights[i];\n                        if (flight.id == flightId) {\n                            flight.tags = [];\n                        }\n                    } \n                } else {\n                    for (var i = 0; i < thisFlight.state.flights.length; i++) {\n                        let flight = thisFlight.state.flights[i];\n                        let tags = flight.tags;\n                        if (flight.id == flightId) {\n                            let tags = flight.tags;\n                            tags.splice(tags.indexOf(tag), 1);\n                        }\n                    }\n                } \n                thisFlight.setState(thisFlight.state);\n            },   \n            error : function(jqXHR, textStatus, errorThrown) {\n            },   \n            async: false \n        });  \n    }\n\n    /**\n     * Associates a tag with this flight\n     * @param id the tag id to associate\n     */\n    associateTag(tagId, flightId) {\n        console.log(\"associating tag #\"+tagId+\" with flight #\"+flightId);\n\n        var submissionData = {\n            id : flightId,\n            tag_id : tagId\n        };\n\n        let thisFlight = this;\n\n        $.ajax({\n            type: 'POST',\n            url: '/protected/associate_tag',\n            data : submissionData,\n            dataType : 'json',\n            success : function(response) {\n                console.log(\"received response: \");\n                console.log(response);\n                for (var i = 0; i < thisFlight.state.flights.length; i++) {\n                    let flight = thisFlight.state.flights[i];\n                    if (flight.id == flightId) {\n                        if (flight.tags != null && flight.tags.length > 0) {\n                            flight.tags.push(response);\n                        } else {\n                            flight.tags = [response];\n                        }\n                    }\n                }\n                thisFlight.setState(thisFlight.state);\n            },   \n            error : function(jqXHR, textStatus, errorThrown) {\n            },   \n            async: true \n        });  \n    }\n\n\n    /**\n     * Handles when the user presses the clear all tags button, and prompts them with @module confirmModal\n     */\n    clearTags(flightId) {\n        confirmModal.show(\"Confirm action\", \"Are you sure you would like to remove all the tags from flight #\" + flightId + \"?\",\n                          () => {this.removeTag(flightId, -2, false)});\n    }\n\n    render() {\n        let style = null;\n        if (this.state.mapVisible || this.state.plotVisible) {\n            console.log(\"rendering half\");\n            style = { \n                overflow : \"scroll\",\n                height : \"calc(50%)\"\n            };  \n        } else {\n            style = { \n                overflow : \"scroll\",\n                height : \"calc(100%)\"\n            };  \n        }\n\n        style.padding = \"5\";\n\n        return (\n            <div>\n                <SignedInNavbar \n                    activePage=\"flights\"\n                    filterVisible={this.state.filterVisible}\n                    plotVisible={this.state.plotVisible}\n                    mapVisible={this.state.mapVisible}\n                    filterSelected={this.state.filterSelected}\n                    plotSelected={this.state.plotSelected}\n                    mapSelected={this.state.mapSelected}\n                    mapStyle={this.state.mapStyle}\n                    togglePlot={() => this.togglePlot()}\n                    toggleFilter={() => this.toggleFilter()}\n                    toggleMap={() => this.toggleMap()}\n                    mapSelectChanged={(style) => this.mapSelectChanged(style)}\n                    waitingUserCount={waitingUserCount}\n                    fleetManager={fleetManager}\n                    ref={elem => this.navRef = elem}\n                    unconfirmedTailsCount={unconfirmedTailsCount}\n                    modifyTailsAccess={modifyTailsAccess}\n                />\n\n                <div id=\"plot-map-div\" className='row m-0' style={{width:\"100%\", height:\"0%\"}}>\n                    <div id=\"map\" className=\"map\" style={{width:\"50%\", display:\"none\"}}></div> \n                    <div id=\"plot\" style={{width:\"50%\", display:\"none\"}}></div>\n                </div>\n\n                <div style={style}>\n                    <FlightsCard\n                        parent={this}\n                        flights={this.state.flights} \n                        navBar={this.navRef}\n                        ref={elem => this.flightsRef = elem}\n                        showMap={() => {this.showMap();}}\n                        showPlot={() => {this.showPlot();}}\n                        getFilterQuery={() => {return this.getQuery();}}\n                        flights={this.state.flights}\n                        setAvailableLayers={(plotLayers) => {this.setAvailableLayers(plotLayers);}}\n                        setFlights={(flights) => {\n                            this.setState({\n                                flights : flights\n                            });\n                        }}\n\n                        addTag={(flightId, name, description, color) => this.addTag(flightId, name, description, color)}\n                        removeTag={(flightId, tagId, perm) => this.removeTag(flightId, tagId, perm)}\n                        deleteTag={(flightId, tagId) => this.deleteTag(flightId, tagId)}\n                        getUnassociatedTags={(flightId) => this.getUnassociatedTags(flightId)}\n                        associateTag={(tagId, flightId) => this.associateTag(tagId, flightId)}\n                        clearTags={(flightId) => this.clearTags(flightId)}\n                        editTag={(currentTag, newTag) => this.editTag(currentTag, newTag)}\n                    />\n                </div>\n            </div>\n        );\n    }\n}\n\nconsole.log(\"trying to render FlightPage\");\n\nvar flightPage = ReactDOM.render(\n    <FlightPage />,\n    document.querySelector('#flight-page')\n);\n\nconsole.log(\"rendered flightsCard!\");\n\n\n//need to wait for the page to load before initializing maps\n//TODO: this is the same as in flights.js, put it in a single spot\n$(document).ready(function() {\n    Plotly.newPlot('plot', [], global.plotlyLayout);\n\n    initializeMap();\n\n    var myPlot = document.getElementById(\"plot\");\n    console.log(\"myPlot:\");\n    console.log(myPlot);\n\n    myPlot.on('plotly_hover', function(data) {\n        var xaxis = data.points[0].xaxis,\n            yaxis = data.points[0].yaxis;\n\n        /*\n            var infotext = data.points.map(function(d) {\n                return ('width: '+xaxis.l2p(d.x)+', height: '+yaxis.l2p(d.y));\n            });\n            */\n\n        console.log(\"in hover!\");\n        console.log(data);\n        let x = data.points[0].x;\n        //let x = data.points[0].pointIndex;\n\n        //console.log(\"x: \" + x);\n\n        map.getLayers().forEach(function(layer) {\n            if (layer instanceof VectorLayer) {\n                if ('flightState' in layer) {\n                    //console.log(\"VECTOR layer:\");\n\n                    var hiddenStyle = new Style({\n                        stroke: new Stroke({\n                            color: layer.flightState.state.color,\n                            width: 1.5\n                        }),\n                        image: new Circle({\n                            radius: 5,\n                            stroke: new Stroke({\n                                color: [0,0,0,0],\n                                width: 2\n                            })\n                        })\n                    });\n\n                    var visibleStyle = new Style({\n                        stroke: new Stroke({\n                            color: layer.flightState.state.color,\n                            width: 1.5\n                        }),\n                        image: new Circle({\n                            radius: 5,\n                            stroke: new Stroke({\n                                color: layer.flightState.state.color,\n                                width: 2\n                            })\n                        })\n                    });\n\n                    if (layer.getVisible()) {\n                        if (x < layer.flightState.state.points.length) {\n                            console.log(\"need to draw point at: \" + layer.flightState.state.points[x]);\n                            layer.flightState.state.trackingPoint.setStyle(visibleStyle);\n                            layer.flightState.state.trackingPoint.getGeometry().setCoordinates(layer.flightState.state.points[x]);\n                        } else {\n                            console.log(\"not drawing point x: \" + x + \" >= points.length: \" + layer.flightState.state.points.length);\n                            layer.flightState.state.trackingPoint.setStyle(hiddenStyle);\n                        }\n                    }\n                }\n            }\n        });\n    });\n\n});\n"],"mappings":"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"}]}