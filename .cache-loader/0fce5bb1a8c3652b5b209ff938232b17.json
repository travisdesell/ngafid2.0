{"remainingRequest":"/ngafid/ngafid2.0/node_modules/babel-loader/lib/index.js??ruleSet[1].rules[0].use[1]!/ngafid/ngafid2.0/src/main/javascript/filter.js","dependencies":[{"path":"/ngafid/ngafid2.0/src/main/javascript/filter.js","mtime":1664810261286},{"path":"/ngafid/ngafid2.0/.babelrc","mtime":1664810261182},{"path":"/ngafid/ngafid2.0/node_modules/cache-loader/dist/cjs.js","mtime":1664910647113},{"path":"/ngafid/ngafid2.0/node_modules/babel-loader/lib/index.js","mtime":1664910647213}],"contextDependencies":[],"result":["function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport 'bootstrap';\nimport React, { Component, useState, useEffect, useRef, createRef } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Overlay from 'react-bootstrap/Overlay';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Popover from 'react-bootstrap/Popover';\nimport Tooltip from 'react-bootstrap/Tooltip';\nimport Button from 'react-bootstrap/Button';\nimport Form from 'react-bootstrap/Form';\nimport FormGroup from 'react-bootstrap/Form';\nimport FormControl from 'react-bootstrap/FormControl';\nimport InputGroup from 'react-bootstrap/InputGroup';\nimport ListGroup from 'react-bootstrap/ListGroup';\nimport Container from 'react-bootstrap/Container';\nimport Col from 'react-bootstrap/Col';\nimport Row from 'react-bootstrap/Row';\nimport { Colors } from \"./map.js\";\nimport { timeZones } from \"./time_zones.js\";\nimport { confirmModal } from \"./confirm_modal.js\"; //Used to check names for filter validation\n\nfunction isEmptyOrSpaces(str) {\n  return str === null || str.match(/^ *$/) !== null;\n}\n\nfunction getRuleFromInput(input, rules) {\n  var rule = null;\n\n  for (var i = 0; i < rules.length; i++) {\n    if (input === rules[i].name) {\n      rule = rules[i];\n      break;\n    }\n  }\n\n  return rule;\n}\n\nfunction filterValid(filter, rules) {\n  if (filter.type == \"GROUP\") {\n    if (filter.filters.length == 0) {\n      return \"Group has no rules.\";\n    } else {\n      return \"\";\n    }\n  } else if (filter.type == \"RULE\") {\n    //console.log(filter);\n    var inputs = filter.inputs;\n\n    if (inputs[0] == 0) {\n      return \"Please select a rule.\";\n    } else {\n      //console.log(\"checking rule valid, inputs then rule:\");\n      //console.log(inputs);\n      var rule = getRuleFromInput(inputs[0], rules); //console.log(rule);\n\n      if (rule == null) {\n        return \"Please select a rule.\";\n      }\n\n      for (var i = 0; i < rule.conditions.length; i++) {\n        if (rule.conditions[i].type == \"number\") {\n          if (typeof inputs[i + 1] == 'undefined' || inputs[i + 1] == \"\") {\n            return \"Please enter a number.\";\n          }\n        } else if (rule.conditions[i].type == \"time\") {\n          if (typeof inputs[i + 1] == 'undefined' || inputs[i + 1] == \"\") {\n            return \"Please enter a time.\";\n          }\n        } else if (rule.conditions[i].type == \"date\") {\n          if (typeof inputs[i + 1] == 'undefined' || inputs[i + 1] == \"\") {\n            return \"Please enter a date.\";\n          }\n        } else if (rule.conditions[i].type == \"datetime-local\") {\n          if (typeof inputs[i + 1] == 'undefined' || inputs[i + 1] == \"\") {\n            return \"Please enter a date and time.\";\n          }\n        }\n      }\n\n      return \"\";\n    }\n  } else {\n    return \"Unknown filter type: '\" + filter.type + \"'\";\n  }\n}\n\nfunction recursiveValid(filters, rules) {\n  if (filterValid(filters, rules) != \"\") return false; //console.log(\"recursiveValid on:\");\n  //console.log(filters);\n\n  var subFilters = filters.filters;\n\n  for (var i = 0; i < subFilters.length; i++) {\n    if (subFilters[i].type == \"GROUP\") {\n      var subValid = recursiveValid(subFilters[i], rules); //console.log(\"GROUP was valid? \" + subValid);\n\n      if (!subValid) return false;\n    } else if (subFilters[i].type == \"RULE\") {\n      var _subValid = filterValid(subFilters[i], rules) == \"\"; //console.log(\"RULE was valid? \" + subValid);\n\n\n      if (!_subValid) return false;\n    } else {\n      //console.log(\"type wasn't defined!\");\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function isValidFilter(filters, rules) {\n  //console.log(\"isValidFilter?\");\n  //console.log(rules);\n  var valid = recursiveValid(filters, rules); //console.log(\"isValid? \" + valid);\n\n  return valid;\n}\n\nfunction getFilterAtTreeIndexHelper(filter, treeIndex) {\n  console.log(\"current treeIndex: \" + treeIndex);\n  console.log(filter);\n  var commaIndex = treeIndex.indexOf(\",\");\n  console.log(\"commaIndex: \" + commaIndex);\n\n  if (commaIndex === -1) {\n    console.log(\"final filter:\");\n    console.log(filter.filters[treeIndex]);\n    return filter.filters[treeIndex];\n  } else {\n    var filterIndex = treeIndex.substr(0, commaIndex);\n    var nextIndex = treeIndex.substr(commaIndex + 1);\n    console.log(\"nextIndex: \" + nextIndex);\n    return getFilterAtTreeIndexHelper(filter.filters[filterIndex], nextIndex);\n  }\n}\n\nfunction getFilterAtTreeIndex(filter, treeIndex) {\n  console.log(\"starting treeIndex: \" + treeIndex);\n  console.log(filter);\n\n  if (treeIndex === \"root\") {\n    //this is the top level filter\n    return filter;\n  } else {\n    var nextIndex = treeIndex.substr(treeIndex.indexOf(\",\") + 1);\n    return getFilterAtTreeIndexHelper(filter, nextIndex);\n  }\n}\n\nfunction andClicked(filter, treeIndex) {\n  console.log(\"and clicked at treeIndex: \" + treeIndex);\n  var targetFilter = getFilterAtTreeIndex(filter, treeIndex);\n  console.log(targetFilter);\n\n  if (targetFilter.type === \"GROUP\") {\n    targetFilter.condition = \"AND\";\n  }\n}\n\nfunction orClicked(filter, treeIndex) {\n  console.log(\"or clicked at treeIndex: \" + treeIndex);\n  var targetFilter = getFilterAtTreeIndex(filter, treeIndex);\n  console.log(targetFilter);\n\n  if (targetFilter.type === \"GROUP\") {\n    targetFilter.condition = \"OR\";\n  }\n\n  return filter;\n}\n\nfunction addRule(filter, treeIndex) {\n  console.log(\"adding rule at treeIndex: \" + treeIndex);\n  var targetFilter = getFilterAtTreeIndex(filter, treeIndex);\n  console.log(targetFilter);\n  targetFilter.filters.push({\n    type: \"RULE\",\n    inputs: []\n  });\n  return filter;\n}\n\nfunction addGroup(filter, treeIndex) {\n  console.log(\"adding group at treeIndex: \" + treeIndex);\n  var targetFilter = getFilterAtTreeIndex(filter, treeIndex);\n  console.log(targetFilter);\n  targetFilter.filters.push({\n    type: \"GROUP\",\n    condition: \"AND\",\n    filters: []\n  });\n  return filter;\n}\n\nfunction removeFilter(filter, treeIndex) {\n  console.log(\"removing filter with treeIndex: \" + treeIndex);\n  console.log(filter); //first check to see if the treeIndex is the root filter, if so, just clear it\n\n  if (treeIndex === \"root\") {\n    //return an empty group\n    return {\n      type: \"GROUP\",\n      condition: \"AND\",\n      filters: []\n    };\n  } else {\n    //otherwise get the *parent* of the treeIndex\n    var parentIndex = treeIndex.substr(0, treeIndex.lastIndexOf(\",\"));\n    var childIndex = treeIndex.substr(treeIndex.lastIndexOf(\",\") + 1);\n    console.log(\"parentIndex: \" + parentIndex + \", childIndex: \" + childIndex);\n    var parentFilter = getFilterAtTreeIndex(filter, parentIndex);\n    parentFilter.filters.splice(childIndex, 1);\n  }\n\n  return filter;\n}\n\nfunction ruleChange(filter, treeIndex, rules, inputs, event) {\n  console.log(\"changing rule with treeIndex: \" + treeIndex);\n  console.log(inputs);\n  console.log(\"event.target.value: \" + event.target.value);\n  console.log(\"filter: \");\n  console.log(filter);\n  inputs[0] = event.target.value;\n  inputs.splice(1);\n  return filter;\n}\n\nfunction ruleValueChange(filter, treeIndex, inputs, index, event) {\n  console.log(\"changing rule with treeIndex: \" + treeIndex);\n  console.log(\"modified index: \" + index);\n  console.log(inputs);\n  console.log(\"event.target.value: \" + event.target.value);\n  console.log(\"filter: \");\n  console.log(filter);\n  inputs[index + 1] = event.target.value;\n  return filter;\n}\n\nvar Rule = /*#__PURE__*/function (_React$Component) {\n  _inherits(Rule, _React$Component);\n\n  var _super = _createSuper(Rule);\n\n  function Rule(props) {\n    _classCallCheck(this, Rule);\n\n    return _super.call(this, props);\n  }\n\n  _createClass(Rule, [{\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      var inputs = this.props.filter.inputs;\n      var selectedRule = getRuleFromInput(inputs[0], this.props.rules); //console.log(\"rendering rule\");\n      //console.log(inputs);\n      //console.log(selectedRule);\n\n      if (selectedRule == null) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          style: {\n            display: \"flex\",\n            flexDirection: \"row\"\n          }\n        }, /*#__PURE__*/React.createElement(\"select\", {\n          id: \"stateSelect\",\n          type: \"select\",\n          className: \"form-control\",\n          onChange: function onChange(event) {\n            return _this.props.setFilter(ruleChange(_this.props.getFilter(), _this.props.treeIndex, _this.props.rules, inputs, event));\n          },\n          style: {\n            flexBasis: \"180px\",\n            flexShrink: 0,\n            marginRight: 5\n          },\n          value: inputs[0]\n        }, /*#__PURE__*/React.createElement(\"option\", {\n          value: \"Select Rule\"\n        }, \"Select Rule\"), this.props.rules.map(function (ruleInfo, index) {\n          //console.log(\"adding rule: \" + ruleInfo.name + \", with value: \" + index);\n          return /*#__PURE__*/React.createElement(\"option\", {\n            value: ruleInfo.name,\n            key: \"rule-\" + index\n          }, ruleInfo.name);\n        })), /*#__PURE__*/React.createElement(\"button\", {\n          type: \"button\",\n          className: \"btn btn-danger btn-sm\"\n        }, \" \", /*#__PURE__*/React.createElement(\"i\", {\n          className: \"fa fa-times\",\n          \"aria-hidden\": \"true\",\n          style: {\n            padding: \"4 4 3 4\"\n          },\n          onClick: function onClick() {\n            return _this.props.setFilter(removeFilter(_this.props.getFilter(), _this.props.treeIndex));\n          }\n        }), \" \"));\n      } else {\n        //console.log(\"selectedRule.conditions:\");\n        //console.log(selectedRule.conditions);\n        //console.log(\"inputs:\");\n        //console.log(inputs);\n        while (inputs.length < selectedRule.conditions.length + 1) {\n          var lastInput = inputs.length - 1;\n\n          if (selectedRule.conditions[lastInput].type == \"select\") {\n            inputs.push(selectedRule.conditions[lastInput].options[0]);\n          } else {\n            inputs.push(\"\");\n          }\n        } //set the time zone automatically\n\n\n        if (inputs[0] == \"Start Date and Time\" || inputs[0] == \"End Date and Time\" || inputs[0] == \"Start Time\" || inputs[0] == \"End Time\") {\n          var split = new Date().toString().split(\" \");\n          console.log(split); //var timeZoneFormatted = split[split.length - 2] + \" \" + split[split.length - 1];\n\n          var timeZoneFormatted = split[split.length - 2];\n          timeZoneFormatted = timeZoneFormatted.slice(0, 6) + \":\" + timeZoneFormatted.slice(6);\n          console.log(\"current time zone is: \" + timeZoneFormatted);\n          var timeZoneIndex = 0;\n\n          for (var i = 0; i < timeZones.length; i++) {\n            if (timeZones[i].includes(timeZoneFormatted)) {\n              console.log(\"changing time zone index to \" + i + \", '\" + timeZones[i] + \"'\");\n              timeZoneIndex = i;\n\n              if (timeZones[i].includes(\"US\")) {\n                break;\n              }\n            }\n          } //set the time zone to the current time zone\n\n\n          inputs[3] = timeZones[timeZoneIndex];\n        } //console.log(\"fixed inputs:\");\n        //console.log(inputs);\n\n\n        return /*#__PURE__*/React.createElement(\"div\", {\n          style: {\n            display: \"flex\",\n            flexDirection: \"row\"\n          }\n        }, /*#__PURE__*/React.createElement(\"select\", {\n          id: \"stateSelect\",\n          type: \"select\",\n          className: \"form-control\",\n          onChange: function onChange(event) {\n            return _this.props.setFilter(ruleChange(_this.props.getFilter(), _this.props.treeIndex, _this.props.rules, inputs, event));\n          },\n          style: {\n            flexBasis: \"180px\",\n            flexShrink: 0,\n            marginRight: 5\n          },\n          value: inputs[0]\n        }, /*#__PURE__*/React.createElement(\"option\", {\n          value: \"Select Rule\"\n        }, \"Select Rule\"), this.props.rules.map(function (ruleInfo, index) {\n          //console.log(\"adding rule: \" + ruleInfo.name + \", with value: \" + index);\n          return /*#__PURE__*/React.createElement(\"option\", {\n            value: ruleInfo.name,\n            key: \"rule-\" + index\n          }, ruleInfo.name);\n        })), selectedRule.conditions.map(function (conditionInfo, index) {\n          if (conditionInfo.type == \"select\") {\n            var flexBasis = \"150px\";\n\n            if (conditionInfo.name == \"timezone\") {\n              flexBasis = \"375px\";\n            }\n\n            return /*#__PURE__*/React.createElement(\"select\", {\n              id: \"stateSelect\",\n              type: conditionInfo.type,\n              key: \"select-\" + index,\n              className: \"form-control\",\n              onChange: function onChange(event) {\n                return _this.props.setFilter(ruleValueChange(_this.props.getFilter(), _this.props.treeIndex, inputs, index, event));\n              },\n              style: {\n                flexBasis: flexBasis,\n                flexShrink: 0,\n                marginRight: 5\n              },\n              value: inputs[index + 1]\n            }, conditionInfo.options.map(function (optionInfo, index) {\n              return /*#__PURE__*/React.createElement(\"option\", {\n                value: optionInfo,\n                key: conditionInfo.name + \"-\" + index\n              }, optionInfo);\n            }));\n          } else if (conditionInfo.type == \"time\" || conditionInfo.type == \"date\" || conditionInfo.type == \"number\" || conditionInfo.type == \"datetime-local\") {\n            return /*#__PURE__*/React.createElement(\"input\", {\n              type: conditionInfo.type,\n              step: \"any\",\n              key: \"input-\" + index,\n              className: \"form-control\",\n              \"aria-describedby\": \"valueHelp\",\n              placeholder: \"Enter \" + conditionInfo.name,\n              onChange: function onChange(event) {\n                return _this.props.setFilter(ruleValueChange(_this.props.getFilter(), _this.props.treeIndex, inputs, index, event));\n              },\n              style: {\n                flexBasis: \"150px\",\n                flexShrink: 0,\n                marginRight: 5\n              },\n              value: inputs[index + 1]\n            });\n          }\n        }), /*#__PURE__*/React.createElement(\"button\", {\n          type: \"button\",\n          className: \"btn btn-danger btn-sm\"\n        }, \" \", /*#__PURE__*/React.createElement(\"i\", {\n          className: \"fa fa-times\",\n          \"aria-hidden\": \"true\",\n          style: {\n            padding: \"4 4 3 4\"\n          },\n          onClick: function onClick() {\n            return _this.props.setFilter(removeFilter(_this.props.getFilter(), _this.props.treeIndex));\n          }\n        }), \" \"));\n      }\n    }\n  }]);\n\n  return Rule;\n}(React.Component);\n\nvar Group = /*#__PURE__*/function (_React$Component2) {\n  _inherits(Group, _React$Component2);\n\n  var _super2 = _createSuper(Group);\n\n  function Group(props) {\n    var _this2;\n\n    _classCallCheck(this, Group);\n\n    _this2 = _super2.call(this, props);\n    var colorRand = Colors.randomValue();\n    _this2.state = {\n      showSavePopover: false,\n      showLoadPopover: false,\n      loadPopoverTarget: \"\",\n      savePopoverTarget: \"\",\n      saveButtonDisabled: true,\n      storedFilters: props.storedFilters,\n      editingFilter: {},\n      filterSaved: false,\n      filterName: \"\",\n      filterColor: colorRand\n    };\n    _this2.handleColorChange = _this2.handleColorChange.bind(_assertThisInitialized(_this2));\n    return _this2;\n  }\n\n  _createClass(Group, [{\n    key: \"toggleLoadPopover\",\n    value: function toggleLoadPopover() {\n      this.state.showLoadPopover = !this.state.showLoadPopover;\n      this.setState(this.state);\n    }\n  }, {\n    key: \"setLoadPopoverTarget\",\n    value: function setLoadPopoverTarget(event) {\n      this.state.loadPopoverTarget = event.target;\n      console.log(\"setting load popover target\");\n      this.setState(this.state);\n    }\n  }, {\n    key: \"toggleSavePopover\",\n    value: function toggleSavePopover() {\n      this.state.showSavePopover = !this.state.showSavePopover;\n      this.setState(this.state);\n    }\n  }, {\n    key: \"setSavePopoverTarget\",\n    value: function setSavePopoverTarget(event) {\n      this.state.savePopoverTarget = event.target;\n      this.setState(this.state);\n    }\n  }, {\n    key: \"setFilter\",\n    value: function setFilter(filter) {\n      this.toggleLoadPopover();\n      var filterJSON = JSON.parse(filter.filter);\n      this.props.setFilter(filterJSON);\n      setTimeout(function () {\n        //show resolution tooltip for a max 10s\n        this.props.submitFilter();\n      }.bind(this), 50);\n    }\n  }, {\n    key: \"saveFilter\",\n    value: function saveFilter() {\n      console.log(\"Saving filter with name: \");\n      console.log(this.state.filterName);\n      this.storeFilter(this.state.filterName, this.state.filterColor);\n    }\n  }, {\n    key: \"submitChanges\",\n    value: function submitChanges(filter) {\n      var thisFilter = this;\n      var submissionData = {\n        currentName: filter.name,\n        newName: this.state.filterName,\n        filterJSON: JSON.stringify(this.props.getFilter()),\n        color: this.state.filterColor\n      };\n\n      if (isEmptyOrSpaces(submissionData.newName)) {\n        $('#modify-filter-submit-button').attr('data-title', 'Please make sure the filter name is not empty before saving.').tooltip('show');\n        setTimeout(function () {\n          //show resolution tooltip for a max 10s\n          $('#modify-filter-submit-button').tooltip('hide');\n        }.bind(this), 10000);\n        return;\n      } else if (submissionData.newName === submissionData.currentName && filter.filter === this.props.getFilter() && filter.color === submissionData.color) {\n        $('#modify-filter-submit-button').attr('data-title', 'Please make sure the filter name is different from its original name, the filter color is different, or that the filter rules are different.').tooltip('show');\n        setTimeout(function () {\n          //show resolution tooltip for a max 10s\n          $('#modify-filter-submit-button').tooltip('hide');\n        }.bind(this), 10000);\n        return;\n      }\n\n      console.log(\"Mofifying filter \" + filter.name);\n      $.ajax({\n        type: 'POST',\n        url: '/protected/modify_filter',\n        data: submissionData,\n        dataType: 'json',\n        timeout: 0,\n        success: function success(response) {\n          if (response === \"DUPLICATE_PK\") {\n            $('#modify-filter-submit-button').tooltip('show');\n            setTimeout(function () {\n              //show resolution tooltip for a max 10s\n              $('#modify-filter-submit-button').tooltip('hide');\n            }.bind(this), 10000);\n          } else {\n            thisFilter.state.editingFilter = {};\n            thisFilter.state.showLoadPopover = false;\n            $('#modify-filter-submit-button').tooltip('hide');\n            $('#load-filter-button').tooltip('show');\n            setTimeout(function () {\n              //show resolution tooltip for a max 10s\n              $('#load-filter-button').tooltip('hide');\n            }.bind(this), 10000);\n          }\n\n          thisFilter.setState(thisFilter.state);\n        },\n        error: function error(jqXHR, textStatus, errorThrown) {\n          errorModal.show(\"Error Loading Flights\", errorThrown);\n        },\n        async: true\n      });\n    }\n  }, {\n    key: \"deleteFilterClicked\",\n    value: function deleteFilterClicked(name) {\n      var _this3 = this;\n\n      confirmModal.show(\"Confirm Delete Filter: '\" + name + \"'\", \"Are you sure you wish to delete filter '\" + name + \"'?\\n\\nThis operation will remove it from your fleet, meaning it will be deleted for other users as well. This operation cannot be undone!\", function () {\n        _this3.deleteFilter(name);\n      });\n    }\n  }, {\n    key: \"deleteFilter\",\n    value: function deleteFilter(name) {\n      var thisFilter = this;\n      var submissionData = {\n        name: name\n      };\n      console.log(\"Removing filter \" + name);\n      console.log(this.filterRef);\n      $.ajax({\n        type: 'POST',\n        url: '/protected/remove_filter',\n        data: submissionData,\n        dataType: 'json',\n        timeout: 0,\n        success: function success(response) {\n          thisFilter.setState(thisFilter.state);\n        },\n        error: function error(jqXHR, textStatus, errorThrown) {\n          errorModal.show(\"Error Loading Flights\", errorThrown);\n        },\n        async: true\n      });\n    }\n  }, {\n    key: \"storeFilter\",\n    value: function storeFilter(name, color) {\n      var thisFilter = this;\n      var submissionData = {\n        name: name,\n        filterJSON: JSON.stringify(this.props.getFilter()),\n        color: color\n      };\n\n      if (isEmptyOrSpaces(name)) {\n        console.log('empty str');\n        $('#save-filter-button-card').attr('data-title', 'Please make sure the filter name is not empty before saving.').tooltip('show');\n        setTimeout(function () {\n          //show resolution tooltip for a max 10s\n          $('#save-filter-button-card').tooltip('hide');\n        }.bind(this), 10000);\n        return;\n      }\n\n      console.log(\"Storing filter \" + name);\n      $.ajax({\n        type: 'POST',\n        url: '/protected/store_filter',\n        data: submissionData,\n        dataType: 'json',\n        timeout: 0,\n        success: function success(response) {\n          if (response === \"DUPLICATE_PK\") {\n            console.log(\"duplicate pk detected\");\n            $('#save-filter-button-card').tooltip('show');\n            setTimeout(function () {\n              //show resolution tooltip for a max 10s\n              $('#save-filter-button-card').tooltip('hide');\n            }.bind(this), 10000);\n          } else {\n            $('#save-filter-button-card').tooltip('hide');\n            $('#save-filter-button').tooltip('show');\n            thisFilter.state.saveButtonDisabled = true;\n            thisFilter.state.showSavePopover = false;\n            thisFilter.state.filterSaved = true;\n            setTimeout(function () {\n              //show success tooltip for a max 5s\n              $('#save-filter-button').tooltip('hide');\n            }.bind(this), 5000);\n          }\n\n          thisFilter.setState(thisFilter.state);\n        },\n        error: function error(jqXHR, textStatus, errorThrown) {\n          errorModal.show(\"Error Loading Flights\", errorThrown);\n        },\n        async: true\n      });\n    }\n  }, {\n    key: \"getStoredFilters\",\n    value: function getStoredFilters() {\n      var storedFilters = [];\n      $.ajax({\n        type: 'GET',\n        url: '/protected/stored_filters',\n        dataType: 'json',\n        success: function success(response) {\n          console.log(\"received filters response: \");\n          console.log(response);\n          storedFilters = response;\n        },\n        error: function error(jqXHR, textStatus, errorThrown) {},\n        async: false\n      });\n      return storedFilters;\n    }\n  }, {\n    key: \"editFilter\",\n    value: function editFilter(filter) {\n      this.props.setFilter(JSON.parse(filter.filter));\n      this.state.editingFilter = filter;\n      this.state.filterName = filter.name;\n      this.state.filterColor = filter.color;\n      this.setState(this.state); //let target = $(\"load-filter-button\").click(function(event){\n      //return event.target;\n      //});\n      //this.state.loadPopoverTarget = target;\n    }\n  }, {\n    key: \"setStoredFilters\",\n    value: function setStoredFilters(filters) {\n      this.setState({\n        storedFilters: filters\n      });\n    }\n  }, {\n    key: \"handleLoadClick\",\n    value: function handleLoadClick(event) {\n      this.toggleLoadPopover();\n      this.setLoadPopoverTarget(event);\n    }\n  }, {\n    key: \"setSelectedFilter\",\n    value: function setSelectedFilter(filter) {\n      this.props.setFilter(JSON.parse(filter));\n    }\n  }, {\n    key: \"renderFilterSelector\",\n    value: function renderFilterSelector(getFiltersMethod, submitMethod) {\n      var filters = getFiltersMethod();\n      loadFilterModal.show(filters, submitMethod);\n    }\n  }, {\n    key: \"handleColorChange\",\n    value: function handleColorChange(event) {\n      var color = event.target.value;\n      console.log(color);\n      this.setState({\n        filterColor: color\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var validated = false,\n          loadFilterButtonId = \"load-filter-button\";\n      var errorMessageStyle = {\n        padding: '7 0 7 0',\n        margin: '0',\n        display: 'block',\n        textAlign: 'left',\n        color: 'red'\n      };\n      var tooltipStyle = {\n        backgroundColor: 'green'\n      };\n      var styleButtonSq = {\n        flex: \"right\",\n        \"float\": \"auto\"\n      };\n      var listStyle = {\n        maxHeight: \"400px\",\n        overflowY: \"scroll\"\n      };\n      var popoverStyle = {\n        maxHeight: \"400px\",\n        minWidth: \"800px\"\n      };\n      var listGrpStyle = {\n        maxHeight: \"400px\"\n      };\n      var filterPillStyle = {\n        marginRight: '4px',\n        lineHeight: '4',\n        opacity: '75%',\n        fontSize: '100%'\n      };\n      var errorHidden = true;\n      var errorMessage = \"\";\n\n      if (this.props.filters.length == 0) {\n        errorHidden = false;\n        errorMessage = \"Group has no rules.\";\n      } //console.log(\"GROUP: index: \" + this.props.treeIndex);\n      //console.log(this.props.filters);\n\n\n      var andChecked = this.props.filters.condition === \"AND\";\n      var andActive = \"\";\n      var orActive = \"\";\n\n      if (andChecked) {\n        andActive = \"active\";\n      } else {\n        orActive = \"active\";\n      }\n\n      var handleSaveClick = function handleSaveClick(event) {\n        _this4.toggleSavePopover();\n\n        validated = true;\n\n        _this4.setSavePopoverTarget(event);\n      }; //if (this.state.filterSaved) {\n      //$('#save-filter-button').tooltip('show');\n      //this.state.filterSaved = false;\n      //} else {\n      //// wait 15s to hide success msg\n      //setTimeout(function() { //start the timer\n      //$('#save-filter-button').tooltip('hide');\n      //}.bind(this), 15000)\n      //}\n\n\n      var filters = this.state.storedFilters;\n      console.log(filters);\n      var loadFilterPopoverContent = \"\";\n      var loadFilterFunction = this.handleLoadClick;\n\n      if (this.state.editingFilter == null) {\n        loadFilterFunction = this.handleLoadClickPersist;\n      }\n\n      var saveCard = \"\";\n\n      if (this.state.showSavePopover) {\n        saveCard = /*#__PURE__*/React.createElement(\"div\", {\n          className: \"card m-1 float-right\",\n          style: {\n            minWidth: \"500px\"\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"card-header float-left\"\n        }, \"Store Filter:\", /*#__PURE__*/React.createElement(\"button\", {\n          type: \"button\",\n          className: \"mr-1 btn btn-danger btn-sm float-right\"\n        }, /*#__PURE__*/React.createElement(\"i\", {\n          className: \"fa fa-times\",\n          \"aria-hidden\": \"true\",\n          style: {\n            padding: \"4 4 3 4\"\n          },\n          onClick: function onClick() {\n            return _this4.setState({\n              showSavePopover: false\n            });\n          }\n        }))), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"card-body\"\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"input-group mb-3\"\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"input-group-prepend\"\n        }, /*#__PURE__*/React.createElement(\"button\", {\n          type: \"button\",\n          className: \"btn btn-outline-secondary\",\n          title: \"Assign a color to this filter\",\n          onClick: function onClick(e) {\n            return $(\"#color-picker-filter\").click();\n          }\n        }, /*#__PURE__*/React.createElement(\"span\", {\n          className: \"badge badge-pill badge-primary\",\n          style: (filterPillStyle, {\n            backgroundColor: this.state.filterColor,\n            verticalAlign: 'text-bottom'\n          })\n        }, /*#__PURE__*/React.createElement(\"i\", {\n          className: \"fa fa-filter\",\n          \"aria-hidden\": \"true\"\n        }))), /*#__PURE__*/React.createElement(\"input\", {\n          key: \"cc-0\",\n          type: \"color\",\n          className: \"hidden\",\n          style: {\n            display: \"none\"\n          },\n          name: \"eventColor\",\n          onChange: function onChange(e) {\n            return _this4.setState({\n              filterColor: e.target.value\n            });\n          },\n          value: this.state.filterColor,\n          id: \"color-picker-filter\"\n        })), /*#__PURE__*/React.createElement(\"input\", {\n          type: \"text\",\n          className: \"form-control\",\n          placeholder: \"Filter Name\",\n          \"aria-label\": \"Filter Name\",\n          \"aria-describedby\": \"basic-addon2\",\n          value: this.state.filterName,\n          onChange: function onChange(e) {\n            return _this4.setState({\n              filterName: e.target.value\n            });\n          }\n        }), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"input-group-append\"\n        }, /*#__PURE__*/React.createElement(\"button\", {\n          type: \"button\",\n          id: \"save-filter-button-card\",\n          className: \"btn btn-outline-secondary\",\n          onClick: function onClick() {\n            _this4.saveFilter();\n          },\n          \"data-toggle\": \"tooltip\",\n          \"data-trigger\": \"manual\",\n          \"data-placement\": \"top\",\n          \"data-title\": \"A filter with that name already exists in your fleet. Please provide a unique name.\"\n        }, \"Save\")))));\n      }\n\n      var loadCard = \"\";\n\n      if (this.state.showLoadPopover) {\n        var _filters = this.getStoredFilters();\n\n        if (_filters != null && _filters.length > 0) {\n          loadCard = /*#__PURE__*/React.createElement(\"div\", {\n            className: \"card m-1 float-right\",\n            style: {\n              minWidth: \"800px\"\n            }\n          }, /*#__PURE__*/React.createElement(\"div\", {\n            className: \"card-header float-left\"\n          }, \"Saved Filters:\", /*#__PURE__*/React.createElement(\"button\", {\n            type: \"button\",\n            className: \"mr-2 btn btn-danger btn-sm float-right\"\n          }, /*#__PURE__*/React.createElement(\"i\", {\n            className: \"fa fa-times\",\n            \"aria-hidden\": \"true\",\n            style: {\n              padding: \"4 4 3 4\"\n            },\n            onClick: function onClick() {\n              return _this4.setState({\n                showLoadPopover: false\n              });\n            }\n          }))), /*#__PURE__*/React.createElement(\"div\", {\n            className: \"card-body\",\n            style: {\n              maxHeight: \"400px\",\n              overflowY: \"scroll\"\n            }\n          }, /*#__PURE__*/React.createElement(\"ul\", {\n            className: \"list-group\"\n          }, _filters.map(function (filter, index) {\n            var initColor = filter.color;\n            var newColor = JSON.parse(JSON.stringify(_this4.state.filterColor)); //make copy for each index\n            //Normal\n\n            var editButton = /*#__PURE__*/React.createElement(\"button\", {\n              className: \"m-1 btn btn-outline-primary align-right\",\n              style: styleButtonSq,\n              onClick: function onClick() {\n                return _this4.editFilter(filter);\n              },\n              title: \"Edit Filter\"\n            }, /*#__PURE__*/React.createElement(\"i\", {\n              className: \"fa fa-pencil\",\n              \"aria-hidden\": \"true\"\n            }));\n            var nameField = /*#__PURE__*/React.createElement(\"div\", {\n              className: \"col-lg-10\"\n            }, /*#__PURE__*/React.createElement(\"button\", {\n              type: \"button\",\n              className: \"m-1 btn btn-secondary\",\n              onClick: function onClick() {\n                return _this4.setFilter(filter);\n              },\n              key: index,\n              style: {\n                lineHeight: '1',\n                fontSize: '100%',\n                marginRight: '4px',\n                backgroundColor: '#e3e3e3',\n                color: '#000000'\n              },\n              title: \"Filter Info\"\n            }, /*#__PURE__*/React.createElement(\"span\", {\n              className: \"badge badge-pill badge-primary\",\n              style: (filterPillStyle, {\n                backgroundColor: filter.color,\n                verticalAlign: 'text-bottom'\n              })\n            }, /*#__PURE__*/React.createElement(\"i\", {\n              className: \"fa fa-filter\",\n              \"aria-hidden\": \"true\"\n            })), /*#__PURE__*/React.createElement(\"span\", {\n              className: \"ml-2 font-weight-bold\"\n            }, filter.name)));\n\n            if (filter.name == _this4.state.editingFilter.name) {\n              //When editing \n              editButton = /*#__PURE__*/React.createElement(\"button\", {\n                className: \"m-1 btn btn-outline-success align-right\",\n                id: \"modify-filter-submit-button\",\n                onClick: function onClick() {\n                  return _this4.submitChanges(filter);\n                },\n                \"data-toggle\": \"tooltip\",\n                \"data-trigger\": \"manual\",\n                \"data-placement\": \"top\",\n                title: \"Submit Changes\",\n                \"data-title\": \"A filter in your fleet already exists with that name! Please choose another name.\"\n              }, /*#__PURE__*/React.createElement(\"i\", {\n                className: \"fa fa-check\",\n                \"aria-hidden\": \"true\"\n              }));\n              nameField = /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n                className: \"col-lg-9 input-group mb-3\"\n              }, /*#__PURE__*/React.createElement(\"div\", {\n                className: \"input-group-prepend\"\n              }, /*#__PURE__*/React.createElement(\"button\", {\n                type: \"button\",\n                className: \"btn btn-outline-secondary\",\n                title: \"Assign a different color to this filter\",\n                onClick: function onClick(e) {\n                  return $(\"#color-picker-filter-mod\").click();\n                }\n              }, /*#__PURE__*/React.createElement(\"span\", {\n                className: \"badge badge-pill badge-primary\",\n                style: (filterPillStyle, {\n                  backgroundColor: _this4.state.filterColor,\n                  verticalAlign: 'text-bottom'\n                })\n              }, /*#__PURE__*/React.createElement(\"i\", {\n                className: \"fa fa-filter\",\n                \"aria-hidden\": \"true\"\n              }))), /*#__PURE__*/React.createElement(\"input\", {\n                key: \"cc-1\",\n                type: \"color\",\n                className: \"hidden\",\n                style: {\n                  display: \"none\"\n                },\n                name: \"eventColor\",\n                onChange: function onChange(e) {\n                  return _this4.setState({\n                    filterColor: e.target.value\n                  });\n                },\n                value: _this4.state.filterColor,\n                id: \"color-picker-filter-mod\"\n              })), /*#__PURE__*/React.createElement(\"input\", {\n                type: \"text\",\n                className: \"form-control\",\n                \"aria-label\": \"Filter Name\",\n                \"aria-describedby\": \"basic-addon2\",\n                value: _this4.state.filterName,\n                onChange: function onChange(e) {\n                  return _this4.setState({\n                    filterName: e.target.value\n                  });\n                }\n              })), /*#__PURE__*/React.createElement(\"div\", {\n                className: \"col-lg-1\"\n              }, /*#__PURE__*/React.createElement(\"button\", {\n                className: \"m-1 btn btn-outline-danger align-right\",\n                style: styleButtonSq,\n                onClick: function onClick(e) {\n                  return _this4.setState({\n                    editingFilter: {}\n                  });\n                },\n                title: \"Discard Changes\"\n              }, /*#__PURE__*/React.createElement(\"i\", {\n                className: \"fa fa-times\",\n                \"aria-hidden\": \"true\"\n              }))));\n            }\n\n            return /*#__PURE__*/React.createElement(\"li\", {\n              className: \"list-group-item\",\n              key: index\n            }, /*#__PURE__*/React.createElement(\"div\", {\n              className: \"container\"\n            }, /*#__PURE__*/React.createElement(\"div\", {\n              className: \"row justify-content-md-center\"\n            }, nameField, /*#__PURE__*/React.createElement(\"div\", {\n              className: \"col-lg-1\"\n            }, editButton), /*#__PURE__*/React.createElement(\"div\", {\n              className: \"col-lg-1\"\n            }, /*#__PURE__*/React.createElement(\"button\", {\n              className: \"m-1 btn btn-outline-primary align-right\",\n              style: styleButtonSq,\n              onClick: function onClick() {\n                return _this4.deleteFilterClicked(filter.name);\n              },\n              title: \"Delete this filter\"\n            }, /*#__PURE__*/React.createElement(\"i\", {\n              className: \"fa fa-trash\",\n              \"aria-hidden\": \"true\"\n            }))))));\n          }))));\n        } else {\n          loadCard = /*#__PURE__*/React.createElement(\"div\", {\n            className: \"card m-1 float-right\",\n            style: {\n              maxWidth: \"500px\"\n            }\n          }, /*#__PURE__*/React.createElement(\"div\", {\n            className: \"card-header float-left\"\n          }, \"No filters stored yet.\", /*#__PURE__*/React.createElement(\"button\", {\n            type: \"button\",\n            className: \"mr-2 btn btn-danger btn-sm float-right\"\n          }, /*#__PURE__*/React.createElement(\"i\", {\n            className: \"fa fa-times\",\n            \"aria-hidden\": \"true\",\n            style: {\n              padding: \"4 4 3 4\"\n            },\n            onClick: function onClick() {\n              return _this4.setState({\n                showLoadPopover: false\n              });\n            }\n          }))), /*#__PURE__*/React.createElement(\"div\", {\n            className: \"card-body\"\n          }, \"No filters stored yet for this fleet.\"));\n        }\n      }\n\n      var submitHidden = true;\n      var submitDisabled = true;\n\n      if (typeof this.props.submitButtonName !== 'undefined') {\n        submitHidden = false;\n        submitDisabled = !isValidFilter(this.props.filters, this.props.rules);\n        this.state.saveButtonDisabled = !isValidFilter(this.props.filters, this.props.rules) || this.state.filterSaved;\n        this.state.filterSaved = false;\n      }\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card mb-1 m-1 border-secondary\",\n        style: {\n          background: \"rgba(248,259,250,0.8)\",\n          margin: 0\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex justify-content-between\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"p-2\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"btn-group btn-group-toggle\",\n        \"data-toggle\": \"buttons\"\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        className: \"btn btn-outline-primary btn-sm \" + andActive,\n        onClick: function onClick() {\n          return _this4.props.setFilter(andClicked(_this4.props.getFilter(), _this4.props.treeIndex));\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"radio\",\n        name: \"options\",\n        id: \"option1\",\n        autoComplete: \"off\",\n        defaultChecked: andChecked\n      }), \"AND\"), /*#__PURE__*/React.createElement(\"label\", {\n        className: \"btn btn-outline-primary btn-sm \" + orActive,\n        onClick: function onClick() {\n          return _this4.props.setFilter(orClicked(_this4.props.getFilter(), _this4.props.treeIndex));\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"radio\",\n        name: \"options\",\n        id: \"option2\",\n        autoComplete: \"off\",\n        defaultChecked: !andChecked\n      }), \"OR\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"p-2\"\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-primary btn-sm mr-1\",\n        onClick: function onClick() {\n          return _this4.props.setFilter(addRule(_this4.props.getFilter(), _this4.props.treeIndex));\n        }\n      }, \"Add Rule\"), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-primary btn-sm mr-1\",\n        onClick: function onClick() {\n          return _this4.props.setFilter(addGroup(_this4.props.getFilter(), _this4.props.treeIndex));\n        }\n      }, \"Add Group\"), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-danger btn-sm\"\n      }, \" \", /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-times\",\n        \"aria-hidden\": \"true\",\n        style: {\n          padding: \"4 4 3 4\"\n        },\n        onClick: function onClick() {\n          return _this4.props.setFilter(removeFilter(_this4.props.getFilter(), _this4.props.treeIndex));\n        }\n      }), \" \"))), this.props.filters.filters.map(function (filterInfo, index) {\n        if (filterInfo.type === \"GROUP\") {\n          return /*#__PURE__*/React.createElement(\"div\", {\n            className: \"p-2\",\n            key: _this4.props.treeIndex + \",\" + index\n          }, /*#__PURE__*/React.createElement(Group, {\n            key: _this4.props.treeIndex + \",\" + index,\n            treeIndex: _this4.props.treeIndex + \",\" + index,\n            rules: _this4.props.rules,\n            filters: filterInfo,\n            getStoredFilters: function getStoredFilters() {\n              return _this4.props.getStoredFilters();\n            },\n            getFilter: function getFilter() {\n              return _this4.props.getFilter();\n            },\n            setFilter: function setFilter(filter) {\n              return _this4.props.setFilter(filter);\n            },\n            setSortByColumn: function setSortByColumn(sortColumn) {\n              return _this4.props.setSortByColumn(sortColumn);\n            },\n            getSortByColumn: function getSortByColumn() {\n              return _this4.props.getSortByColumn;\n            }\n          }));\n        } else if (filterInfo.type === \"RULE\") {\n          return /*#__PURE__*/React.createElement(\"div\", {\n            className: \"p-2\",\n            key: _this4.props.treeIndex + \",\" + index\n          }, /*#__PURE__*/React.createElement(Rule, {\n            key: _this4.props.treeIndex + \",\" + index,\n            treeIndex: _this4.props.treeIndex + \",\" + index,\n            rules: _this4.props.rules,\n            filter: filterInfo,\n            getStoredFilters: function getStoredFilters() {\n              return _this4.props.getStoredFilters();\n            },\n            getFilter: function getFilter() {\n              return _this4.props.getFilter();\n            },\n            setFilter: function setFilter(filter) {\n              return _this4.props.setFilter(filter);\n            }\n          }));\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex justify-content-end\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"p-2 flex-fill\"\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        style: errorMessageStyle,\n        hidden: errorHidden\n      }, errorMessage)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"p-2\"\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-primary btn-sm mr-1\",\n        hidden: submitHidden,\n        onClick: function onClick(event) {\n          return _this4.handleLoadClick(event);\n        },\n        id: loadFilterButtonId,\n        \"data-toggle\": \"tooltip\",\n        \"data-placement\": \"top\",\n        \"data-trigger\": \"manual\",\n        \"data-title\": \"Changes Saved!\"\n      }, \"Load a Saved Filter\"), /*#__PURE__*/React.createElement(\"button\", {\n        id: \"save-filter-button\",\n        type: \"button\",\n        className: \"btn btn-primary btn-sm mr-1\",\n        onClick: handleSaveClick,\n        hidden: submitHidden,\n        disabled: this.state.saveButtonDisabled,\n        \"data-toggle\": \"tooltip\",\n        \"data-trigger\": \"manual\",\n        \"data-placement\": \"top\",\n        title: \"Filter saved successfully\"\n      }, \"Save Filter\"), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-primary btn-sm mr-1\",\n        disabled: submitDisabled,\n        onClick: function onClick() {\n          return _this4.props.submitFilter(true\n          /*reset current page*/\n          );\n        },\n        hidden: submitHidden\n      }, this.props.submitButtonName))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container\",\n        style: {\n          maxWidth: '100%'\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex flex-row-reverse\"\n      }, saveCard, loadCard)));\n    }\n  }]);\n\n  return Group;\n}(React.Component);\n\nvar Filter = /*#__PURE__*/function (_React$Component3) {\n  _inherits(Filter, _React$Component3);\n\n  var _super3 = _createSuper(Filter);\n\n  function Filter(props) {\n    _classCallCheck(this, Filter);\n\n    return _super3.call(this, props);\n  }\n\n  _createClass(Filter, [{\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-body\",\n        hidden: !this.props.filterVisible,\n        style: {\n          padding: 0,\n          margin: 0\n        }\n      }, /*#__PURE__*/React.createElement(Group, {\n        treeIndex: \"root\",\n        submitButtonName: this.props.submitButtonName,\n        rules: this.props.rules,\n        filters: this.props.filters,\n        getFilter: function getFilter() {\n          return _this5.props.getFilter();\n        },\n        setFilter: function setFilter(filter) {\n          return _this5.props.setFilter(filter);\n        },\n        submitFilter: function submitFilter() {\n          return _this5.props.submitFilter();\n        },\n        setSortByColumn: function setSortByColumn(sortColumn) {\n          return _this5.props.setSortByColumn(sortColumn);\n        },\n        getSortByColumn: function getSortByColumn() {\n          return _this5.props.getSortByColumn;\n        }\n      }));\n    }\n  }]);\n\n  return Filter;\n}(React.Component);\n\nexport { Filter };",{"version":3,"names":["React","Component","useState","useEffect","useRef","createRef","ReactDOM","Overlay","OverlayTrigger","Popover","Tooltip","Button","Form","FormGroup","FormControl","InputGroup","ListGroup","Container","Col","Row","Colors","timeZones","confirmModal","isEmptyOrSpaces","str","match","getRuleFromInput","input","rules","rule","i","length","name","filterValid","filter","type","filters","inputs","conditions","recursiveValid","subFilters","subValid","isValidFilter","valid","getFilterAtTreeIndexHelper","treeIndex","console","log","commaIndex","indexOf","filterIndex","substr","nextIndex","getFilterAtTreeIndex","andClicked","targetFilter","condition","orClicked","addRule","push","addGroup","removeFilter","parentIndex","lastIndexOf","childIndex","parentFilter","splice","ruleChange","event","target","value","ruleValueChange","index","Rule","props","selectedRule","display","flexDirection","setFilter","getFilter","flexBasis","flexShrink","marginRight","map","ruleInfo","padding","lastInput","options","split","Date","toString","timeZoneFormatted","slice","timeZoneIndex","includes","conditionInfo","optionInfo","Group","colorRand","randomValue","state","showSavePopover","showLoadPopover","loadPopoverTarget","savePopoverTarget","saveButtonDisabled","storedFilters","editingFilter","filterSaved","filterName","filterColor","handleColorChange","bind","setState","toggleLoadPopover","filterJSON","JSON","parse","setTimeout","submitFilter","storeFilter","thisFilter","submissionData","currentName","newName","stringify","color","$","attr","tooltip","ajax","url","data","dataType","timeout","success","response","error","jqXHR","textStatus","errorThrown","errorModal","show","async","deleteFilter","filterRef","setLoadPopoverTarget","getFiltersMethod","submitMethod","loadFilterModal","validated","loadFilterButtonId","errorMessageStyle","margin","textAlign","tooltipStyle","backgroundColor","styleButtonSq","flex","listStyle","maxHeight","overflowY","popoverStyle","minWidth","listGrpStyle","filterPillStyle","lineHeight","opacity","fontSize","errorHidden","errorMessage","andChecked","andActive","orActive","handleSaveClick","toggleSavePopover","setSavePopoverTarget","loadFilterPopoverContent","loadFilterFunction","handleLoadClick","handleLoadClickPersist","saveCard","e","click","verticalAlign","saveFilter","loadCard","getStoredFilters","initColor","newColor","editButton","editFilter","nameField","submitChanges","deleteFilterClicked","maxWidth","submitHidden","submitDisabled","submitButtonName","background","filterInfo","sortColumn","setSortByColumn","getSortByColumn","Filter","filterVisible"],"sources":["/ngafid/ngafid2.0/src/main/javascript/filter.js"],"sourcesContent":["import 'bootstrap';\nimport React, { Component, useState, useEffect, useRef, createRef } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Overlay from 'react-bootstrap/Overlay';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Popover from 'react-bootstrap/Popover';\nimport Tooltip from 'react-bootstrap/Tooltip';\nimport Button from 'react-bootstrap/Button';\nimport Form from 'react-bootstrap/Form';\nimport FormGroup from 'react-bootstrap/Form';\nimport FormControl from 'react-bootstrap/FormControl';\nimport InputGroup from 'react-bootstrap/InputGroup';\nimport ListGroup from 'react-bootstrap/ListGroup';\nimport Container from 'react-bootstrap/Container';\nimport Col from 'react-bootstrap/Col';\nimport Row from 'react-bootstrap/Row';\nimport { Colors } from \"./map.js\";\n\nimport { timeZones } from \"./time_zones.js\";\nimport { confirmModal } from \"./confirm_modal.js\";\n\n//Used to check names for filter validation\nfunction isEmptyOrSpaces(str){\n    return str === null || str.match(/^ *$/) !== null;\n}\n\nfunction getRuleFromInput(input, rules) {\n    let rule = null;\n    for (let i = 0; i < rules.length; i++) {\n        if (input === rules[i].name) {\n            rule = rules[i];\n            break;\n        }\n    }\n    return rule;\n}\n\nfunction filterValid(filter, rules) {\n    if (filter.type == \"GROUP\") {\n        if (filter.filters.length == 0) {\n            return \"Group has no rules.\";\n        } else {\n            return \"\";\n        }\n    } else if (filter.type == \"RULE\") {\n        //console.log(filter);\n        let inputs = filter.inputs;\n\n        if (inputs[0] == 0) {\n            return \"Please select a rule.\";\n        } else {\n            //console.log(\"checking rule valid, inputs then rule:\");\n            //console.log(inputs);\n            let rule = getRuleFromInput(inputs[0], rules);\n            //console.log(rule);\n\n            if (rule == null) {\n                return \"Please select a rule.\";\n            }\n\n            for (let i = 0; i < rule.conditions.length; i++) {\n                if (rule.conditions[i].type == \"number\") {\n                    if (typeof inputs[i+1] == 'undefined' || inputs[i+1] == \"\") {\n                        return \"Please enter a number.\";\n                    }\n\n                } else if (rule.conditions[i].type == \"time\") {\n                    if (typeof inputs[i+1] == 'undefined' || inputs[i+1] == \"\") {\n                        return \"Please enter a time.\";\n                    }\n\n                } else if (rule.conditions[i].type == \"date\") {\n                    if (typeof inputs[i+1] == 'undefined' || inputs[i+1] == \"\") {\n                        return \"Please enter a date.\";\n                    }\n\n                } else if (rule.conditions[i].type == \"datetime-local\") {\n                    if (typeof inputs[i+1] == 'undefined' || inputs[i+1] == \"\") {\n                        return \"Please enter a date and time.\";\n                    }\n                }\n            }\n            return \"\";\n        }\n    } else {\n        return \"Unknown filter type: '\" + filter.type + \"'\";\n    }\n}\n\nfunction recursiveValid(filters, rules) {\n    if (filterValid(filters, rules) != \"\") return false;\n\n    //console.log(\"recursiveValid on:\");\n    //console.log(filters);\n\n    let subFilters = filters.filters;\n    for (let i = 0; i < subFilters.length; i++) {\n        if (subFilters[i].type == \"GROUP\") {\n            let subValid = recursiveValid(subFilters[i], rules);\n            //console.log(\"GROUP was valid? \" + subValid);\n            if (!subValid) return false;\n        } else if (subFilters[i].type == \"RULE\") {\n            let subValid = (filterValid(subFilters[i], rules) == \"\");\n            //console.log(\"RULE was valid? \" + subValid);\n            if (!subValid) return false;\n        } else {\n            //console.log(\"type wasn't defined!\");\n            return false;\n        }\n    }\n    return true;\n}\n\nexport function isValidFilter(filters, rules) {\n    //console.log(\"isValidFilter?\");\n    //console.log(rules);\n    let valid = recursiveValid(filters, rules);\n    //console.log(\"isValid? \" + valid);\n    return valid;\n}\n\nfunction getFilterAtTreeIndexHelper(filter, treeIndex) {\n    console.log(\"current treeIndex: \" + treeIndex);\n    console.log(filter);\n\n    let commaIndex = treeIndex.indexOf(\",\");\n    console.log(\"commaIndex: \" + commaIndex);\n\n    if (commaIndex === -1) {\n        console.log(\"final filter:\")\n        console.log(filter.filters[treeIndex]);\n        return filter.filters[treeIndex];\n\n    } else {\n        let filterIndex = treeIndex.substr(0, commaIndex);\n        let nextIndex = treeIndex.substr(commaIndex + 1);\n        console.log(\"nextIndex: \" + nextIndex);\n\n        return getFilterAtTreeIndexHelper(filter.filters[filterIndex], nextIndex);\n    }\n}\n\nfunction getFilterAtTreeIndex(filter, treeIndex) {\n    console.log(\"starting treeIndex: \" + treeIndex);\n    console.log(filter);\n\n    if (treeIndex === \"root\") {\n        //this is the top level filter\n        return filter;\n    } else {\n        let nextIndex = treeIndex.substr(treeIndex.indexOf(\",\") + 1);\n        return getFilterAtTreeIndexHelper(filter, nextIndex);\n    }\n}\n\nfunction andClicked(filter, treeIndex) {\n    console.log(\"and clicked at treeIndex: \" + treeIndex);\n    let targetFilter = getFilterAtTreeIndex(filter, treeIndex);\n    console.log(targetFilter);\n    if (targetFilter.type === \"GROUP\") {\n        targetFilter.condition = \"AND\";\n    }\n}\n\nfunction orClicked(filter, treeIndex) {\n    console.log(\"or clicked at treeIndex: \" + treeIndex);\n    let targetFilter = getFilterAtTreeIndex(filter, treeIndex);\n    console.log(targetFilter);\n    if (targetFilter.type === \"GROUP\") {\n        targetFilter.condition = \"OR\";\n    }\n    return filter;\n}\n\nfunction addRule(filter, treeIndex) {\n    console.log(\"adding rule at treeIndex: \" + treeIndex);\n    let targetFilter = getFilterAtTreeIndex(filter, treeIndex);\n    console.log(targetFilter);\n\n    targetFilter.filters.push({\n        type : \"RULE\",\n        inputs : []\n    });\n    \n    return filter;\n}\n\nfunction addGroup(filter, treeIndex) {\n    console.log(\"adding group at treeIndex: \" + treeIndex);\n    let targetFilter = getFilterAtTreeIndex(filter, treeIndex);\n    console.log(targetFilter);\n\n    targetFilter.filters.push({\n        type : \"GROUP\",\n        condition : \"AND\",\n        filters : []\n    });\n    return filter;\n}\n\n\nfunction removeFilter(filter, treeIndex) {\n    console.log(\"removing filter with treeIndex: \" + treeIndex);\n    console.log(filter);\n\n    //first check to see if the treeIndex is the root filter, if so, just clear it\n    if (treeIndex === \"root\") {\n        //return an empty group\n        return {\n            type : \"GROUP\",\n            condition : \"AND\",\n            filters : []\n        };\n\n    } else {\n        //otherwise get the *parent* of the treeIndex\n        let parentIndex = treeIndex.substr(0, treeIndex.lastIndexOf(\",\"));\n        let childIndex = treeIndex.substr(treeIndex.lastIndexOf(\",\") + 1);\n        console.log(\"parentIndex: \" + parentIndex + \", childIndex: \" + childIndex);\n\n        let parentFilter = getFilterAtTreeIndex(filter, parentIndex);\n        parentFilter.filters.splice(childIndex, 1);\n    }\n\n    return filter;\n}\n\nfunction ruleChange(filter, treeIndex, rules, inputs, event) {\n    console.log(\"changing rule with treeIndex: \" + treeIndex);\n    console.log(inputs);\n    console.log(\"event.target.value: \" + event.target.value);\n    console.log(\"filter: \");\n    console.log(filter);\n\n    inputs[0] = event.target.value;\n    inputs.splice(1);\n\n    return filter;\n}\n\n\nfunction ruleValueChange(filter, treeIndex, inputs, index, event) {\n    console.log(\"changing rule with treeIndex: \" + treeIndex);\n    console.log(\"modified index: \" + index);\n    console.log(inputs);\n    console.log(\"event.target.value: \" + event.target.value);\n    console.log(\"filter: \");\n    console.log(filter);\n\n    inputs[index + 1] = event.target.value;\n\n    return filter;\n}\n\n\nclass Rule extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        let inputs = this.props.filter.inputs;\n        let selectedRule = getRuleFromInput(inputs[0], this.props.rules);\n\n        //console.log(\"rendering rule\");\n        //console.log(inputs);\n        //console.log(selectedRule);\n\n        if (selectedRule == null) {\n            return (\n                <div style={{display: \"flex\", flexDirection: \"row\"}}>\n                    <select id=\"stateSelect\" type=\"select\" className=\"form-control\" onChange={(event) => this.props.setFilter(ruleChange(this.props.getFilter(), this.props.treeIndex, this.props.rules, inputs, event))} style={{flexBasis:\"180px\", flexShrink:0, marginRight:5}} value={inputs[0]}>\n                        <option value=\"Select Rule\">Select Rule</option>\n                        { \n                            this.props.rules.map((ruleInfo, index) => {\n                                //console.log(\"adding rule: \" + ruleInfo.name + \", with value: \" + index);\n                                return ( <option value={ruleInfo.name} key={\"rule-\" + index}>{ruleInfo.name}</option> );\n                            })\n                        }\n                    </select>\n\n                    <button type=\"button\" className=\"btn btn-danger btn-sm\"> <i className=\"fa fa-times\" aria-hidden=\"true\" style={{padding: \"4 4 3 4\"}} onClick={() => this.props.setFilter(removeFilter(this.props.getFilter(), this.props.treeIndex))}></i> </button>\n                </div>\n            );\n\n        } else {\n            //console.log(\"selectedRule.conditions:\");\n            //console.log(selectedRule.conditions);\n            //console.log(\"inputs:\");\n            //console.log(inputs);\n\n            while (inputs.length < selectedRule.conditions.length + 1) {\n                let lastInput = inputs.length - 1;\n                if (selectedRule.conditions[lastInput].type == \"select\") {\n                    inputs.push(selectedRule.conditions[lastInput].options[0]);\n                } else {\n                    inputs.push(\"\");\n                }\n            }\n\n            //set the time zone automatically\n            if ((inputs[0] == \"Start Date and Time\") ||\n                (inputs[0] == \"End Date and Time\") ||\n                (inputs[0] == \"Start Time\") ||\n                (inputs[0] == \"End Time\")) {\n\n                var split = new Date().toString().split(\" \");\n                console.log(split);\n                //var timeZoneFormatted = split[split.length - 2] + \" \" + split[split.length - 1];\n                var timeZoneFormatted = split[split.length - 2];\n                timeZoneFormatted = timeZoneFormatted.slice(0, 6) + \":\" + timeZoneFormatted.slice(6);\n\n                console.log(\"current time zone is: \" + timeZoneFormatted);\n\n                let timeZoneIndex = 0;\n                for (let i = 0; i < timeZones.length; i++) {\n                    if (timeZones[i].includes(timeZoneFormatted)) {\n                        console.log(\"changing time zone index to \" + i + \", '\" + timeZones[i] + \"'\");\n                        timeZoneIndex = i;\n                        if (timeZones[i].includes(\"US\")) {\n                            break;\n                        }\n                    }\n                }\n\n                //set the time zone to the current time zone\n                inputs[3] = timeZones[timeZoneIndex];\n            }\n\n            //console.log(\"fixed inputs:\");\n            //console.log(inputs);\n\n\n            return (\n                <div style={{display: \"flex\", flexDirection: \"row\"}}>\n                    <select id=\"stateSelect\" type=\"select\" className=\"form-control\" onChange={(event) => this.props.setFilter(ruleChange(this.props.getFilter(), this.props.treeIndex, this.props.rules, inputs, event))} style={{flexBasis:\"180px\", flexShrink:0, marginRight:5}} value={inputs[0]}>\n\n                        <option value=\"Select Rule\">Select Rule</option>\n                        { \n                            this.props.rules.map((ruleInfo, index) => {\n                                //console.log(\"adding rule: \" + ruleInfo.name + \", with value: \" + index);\n                                return ( <option value={ruleInfo.name} key={\"rule-\" + index}>{ruleInfo.name}</option> );\n                            })\n                        }\n                    </select>\n\n                    {\n                        selectedRule.conditions.map((conditionInfo, index) => {\n                            if (conditionInfo.type == \"select\") {\n                                let flexBasis = \"150px\";\n                                if (conditionInfo.name == \"timezone\") {\n                                    flexBasis = \"375px\";\n                                }\n\n                                return (\n                                    <select id=\"stateSelect\" type={conditionInfo.type} key={\"select-\" + index} className=\"form-control\" onChange={(event) => this.props.setFilter(ruleValueChange(this.props.getFilter(), this.props.treeIndex, inputs, index, event))} style={{flexBasis:flexBasis, flexShrink:0, marginRight:5}} value={inputs[index + 1]}>\n                                        { \n                                            conditionInfo.options.map((optionInfo, index) => {\n                                                return ( <option value={optionInfo} key={conditionInfo.name + \"-\" + index} >{optionInfo}</option> );\n                                            })\n                                        }\n                                    </select>\n                                );\n\n                            } else if (conditionInfo.type == \"time\" || conditionInfo.type == \"date\" || conditionInfo.type == \"number\" || conditionInfo.type == \"datetime-local\") {\n\n                                return (\n                                    <input type={conditionInfo.type} step=\"any\" key={\"input-\" + index} className={\"form-control\"} aria-describedby=\"valueHelp\" placeholder={\"Enter \" + conditionInfo.name} onChange={(event) => this.props.setFilter(ruleValueChange(this.props.getFilter(), this.props.treeIndex, inputs, index, event))} style={{flexBasis:\"150px\", flexShrink:0, marginRight:5}} value={inputs[index + 1]}/>\n                                );\n                            }\n                        })\n                    }\n\n                    <button type=\"button\" className=\"btn btn-danger btn-sm\"> <i className=\"fa fa-times\" aria-hidden=\"true\" style={{padding: \"4 4 3 4\"}} onClick={() => this.props.setFilter(removeFilter(this.props.getFilter(), this.props.treeIndex))}></i> </button>\n\n                </div>\n            );\n        }\n    }\n}\n\n\nclass Group extends React.Component {\n    constructor(props) {\n        super(props);\n\n        let colorRand = Colors.randomValue();\n\n        this.state = {\n            showSavePopover : false,\n            showLoadPopover : false,\n            loadPopoverTarget : \"\",\n            savePopoverTarget : \"\",\n            saveButtonDisabled : true,\n            storedFilters : props.storedFilters,\n            editingFilter : {},\n            filterSaved : false,\n            filterName : \"\",\n            filterColor : colorRand\n        }\n\n        this.handleColorChange = this.handleColorChange.bind(this);\n    }\n\n    toggleLoadPopover() {\n        this.state.showLoadPopover = !this.state.showLoadPopover;\n        this.setState(this.state);\n    }\n\n    setLoadPopoverTarget(event) {\n        this.state.loadPopoverTarget = event.target;\n        console.log(\"setting load popover target\");\n        this.setState(this.state);\n    }\n\n    toggleSavePopover() {\n        this.state.showSavePopover = !this.state.showSavePopover;\n        this.setState(this.state);\n    }\n\n    setSavePopoverTarget(event) {\n        this.state.savePopoverTarget = event.target;\n        this.setState(this.state);\n    }\n\n    setFilter(filter) {\n        this.toggleLoadPopover();\n        let filterJSON = JSON.parse(filter.filter);\n        this.props.setFilter(filterJSON);\n\n        setTimeout(function() { //show resolution tooltip for a max 10s\n            this.props.submitFilter();\n         }.bind(this), 50)\n    }\n\n    saveFilter() {\n        console.log(\"Saving filter with name: \");\n        console.log(this.state.filterName);\n\n        this.storeFilter(this.state.filterName, this.state.filterColor);\n    }\n\n    submitChanges(filter) {\n        let thisFilter = this;\n\n        let submissionData = {\n            currentName : filter.name,\n            newName : this.state.filterName,\n            filterJSON : JSON.stringify(this.props.getFilter()),\n            color : this.state.filterColor\n        }\n\n        if (isEmptyOrSpaces(submissionData.newName)) {\n            $('#modify-filter-submit-button').attr('data-title', 'Please make sure the filter name is not empty before saving.').tooltip('show');\n            setTimeout(function() { //show resolution tooltip for a max 10s\n                $('#modify-filter-submit-button').tooltip('hide');\n             }.bind(this), 10000)\n\n            return;\n        } else if (submissionData.newName === submissionData.currentName && filter.filter === this.props.getFilter() && filter.color === submissionData.color) {\n            $('#modify-filter-submit-button').attr('data-title', 'Please make sure the filter name is different from its original name, the filter color is different, or that the filter rules are different.').tooltip('show');\n            setTimeout(function() { //show resolution tooltip for a max 10s\n                $('#modify-filter-submit-button').tooltip('hide');\n             }.bind(this), 10000)\n\n            return;\n        }\n\n        console.log(\"Mofifying filter \" + filter.name);\n\n        $.ajax({\n            type: 'POST',\n            url: '/protected/modify_filter',\n            data : submissionData,\n            dataType : 'json',\n            timeout : 0, \n            success : function(response) {\n                if (response === \"DUPLICATE_PK\") {\n                    $('#modify-filter-submit-button').tooltip('show');\n                    setTimeout(function() { //show resolution tooltip for a max 10s\n                        $('#modify-filter-submit-button').tooltip('hide');\n                     }.bind(this), 10000)\n                } else {\n                    thisFilter.state.editingFilter = {};\n                    thisFilter.state.showLoadPopover = false;\n                    \n                    $('#modify-filter-submit-button').tooltip('hide');\n                    $('#load-filter-button').tooltip('show');\n                    setTimeout(function() { //show resolution tooltip for a max 10s\n                        $('#load-filter-button').tooltip('hide');\n                     }.bind(this), 10000)\n                }\n\n                thisFilter.setState(thisFilter.state);\n            },\n            error : function(jqXHR, textStatus, errorThrown) {\n                errorModal.show(\"Error Loading Flights\", errorThrown);\n            },   \n            async: true \n        });  \n    }\n\n    deleteFilterClicked(name) {\n        confirmModal.show(\"Confirm Delete Filter: '\" + name + \"'\",\n                        \"Are you sure you wish to delete filter '\" + name +\"'?\\n\\nThis operation will remove it from your fleet, meaning it will be deleted for other users as well. This operation cannot be undone!\",\n                        () => {this.deleteFilter(name)});\n    }\n\n    deleteFilter(name) {\n        let thisFilter = this;\n\n        let submissionData = {\n            name : name,\n        }\n\n        console.log(\"Removing filter \" + name);\n        console.log(this.filterRef);\n\n        $.ajax({\n            type: 'POST',\n            url: '/protected/remove_filter',\n            data : submissionData,\n            dataType : 'json',\n            timeout : 0, \n            success : function(response) {\n                thisFilter.setState(thisFilter.state);\n            },\n            error : function(jqXHR, textStatus, errorThrown) {\n                errorModal.show(\"Error Loading Flights\", errorThrown);\n            },   \n            async: true \n        });  \n    }\n\n    storeFilter(name, color) {\n        let thisFilter = this;\n\n        let submissionData = {\n            name : name,\n            filterJSON : JSON.stringify(this.props.getFilter()),\n            color : color\n        }\n\n        if (isEmptyOrSpaces(name)) {\n            console.log('empty str');\n            $('#save-filter-button-card').attr('data-title', 'Please make sure the filter name is not empty before saving.').tooltip('show');\n            setTimeout(function() { //show resolution tooltip for a max 10s\n                $('#save-filter-button-card').tooltip('hide');\n             }.bind(this), 10000)\n\n            return;\n        }\n\n        console.log(\"Storing filter \" + name);\n\n        $.ajax({\n            type: 'POST',\n            url: '/protected/store_filter',\n            data : submissionData,\n            dataType : 'json',\n            timeout : 0, \n            success : function(response) {\n                if (response === \"DUPLICATE_PK\") {\n                    console.log(\"duplicate pk detected\");\n                    $('#save-filter-button-card').tooltip('show');\n                    setTimeout(function() { //show resolution tooltip for a max 10s\n                        $('#save-filter-button-card').tooltip('hide');\n                     }.bind(this), 10000)\n                } else {\n                    $('#save-filter-button-card').tooltip('hide');\n                    $('#save-filter-button').tooltip('show');\n\n                    thisFilter.state.saveButtonDisabled = true;\n                    thisFilter.state.showSavePopover = false;\n                    thisFilter.state.filterSaved = true;\n\n                    setTimeout(function() { //show success tooltip for a max 5s\n                        $('#save-filter-button').tooltip('hide');\n                     }.bind(this), 5000)\n                }\n\n                thisFilter.setState(thisFilter.state);\n            },\n\n            error : function(jqXHR, textStatus, errorThrown) {\n                errorModal.show(\"Error Loading Flights\", errorThrown);\n            },   \n            async: true \n        });  \n    }\n\n    getStoredFilters() {\n        let storedFilters = [];\n\n        $.ajax({\n            type: 'GET',\n            url: '/protected/stored_filters',\n            dataType : 'json',\n            success : function(response) {\n                console.log(\"received filters response: \");\n                console.log(response);\n                \n                storedFilters = response;\n            },   \n            error : function(jqXHR, textStatus, errorThrown) {\n            },   \n            async: false \n        });  \n\n        return storedFilters;\n    }\n\n    editFilter(filter) {\n        this.props.setFilter(JSON.parse(filter.filter));\n        this.state.editingFilter = filter;\n        this.state.filterName = filter.name;\n        this.state.filterColor = filter.color;\n        this.setState(this.state);\n       \n        //let target = $(\"load-filter-button\").click(function(event){\n            //return event.target;\n        //});\n\n        //this.state.loadPopoverTarget = target;\n    }\n\n    setStoredFilters(filters) {\n        this.setState({\n            storedFilters : filters\n        });\n    }\n\n    handleLoadClick(event) {\n        this.toggleLoadPopover();\n        this.setLoadPopoverTarget(event);\n    }\n\n    setSelectedFilter(filter) {\n        this.props.setFilter(JSON.parse(filter));\n    }\n   \n    renderFilterSelector(getFiltersMethod, submitMethod) {\n        let filters = getFiltersMethod();\n\n        loadFilterModal.show(filters, submitMethod);\n    }\n\n    handleColorChange(event) {\n        let color = event.target.value;\n        console.log(color);\n\n        this.setState({\n            filterColor : color\n        });\n    };\n\n    render() {\n        var validated = false, loadFilterButtonId = \"load-filter-button\";\n\n        let errorMessageStyle = {\n            padding : '7 0 7 0',\n            margin : '0',\n            display: 'block',\n            textAlign: 'left',\n            color: 'red'\n        };\n\n        let tooltipStyle = {\n            backgroundColor : 'green'\n        }\n\n        let styleButtonSq = {\n            flex : \"right\",\n            float : \"auto\"\n        };\n\n        let listStyle = {\n            maxHeight: \"400px\",\n            overflowY: \"scroll\"\n        }\n\n        let popoverStyle = {\n            maxHeight: \"400px\",\n            minWidth: \"800px\"\n        }\n\n        let listGrpStyle = {\n            maxHeight: \"400px\"\n        }\n\n        let filterPillStyle = {\n            marginRight : '4px',\n            lineHeight : '4',\n            opacity : '75%',\n            fontSize : '100%',\n        }\n\n        let errorHidden = true;\n        let errorMessage = \"\";\n        if (this.props.filters.length == 0) {\n            errorHidden = false;\n            errorMessage = \"Group has no rules.\";\n        }\n\n\n        //console.log(\"GROUP: index: \" + this.props.treeIndex);\n        //console.log(this.props.filters);\n\n        let andChecked = this.props.filters.condition === \"AND\";\n        let andActive = \"\";\n        let orActive = \"\";\n        if (andChecked) {\n            andActive = \"active\";\n        } else {\n            orActive = \"active\";\n        }\n\n\n        const handleSaveClick = (event) => {\n            this.toggleSavePopover();\n            validated = true;\n            this.setSavePopoverTarget(event);\n        };\n\n        //if (this.state.filterSaved) {\n            //$('#save-filter-button').tooltip('show');\n            //this.state.filterSaved = false;\n        //} else {\n            //// wait 15s to hide success msg\n            //setTimeout(function() { //start the timer\n                //$('#save-filter-button').tooltip('hide');\n             //}.bind(this), 15000)\n        //}\n\n        let filters = this.state.storedFilters;\n\n        console.log(filters);\n\n        let loadFilterPopoverContent = \"\";\n\n        let loadFilterFunction = this.handleLoadClick;\n        if (this.state.editingFilter == null){\n            loadFilterFunction = this.handleLoadClickPersist;\n        }\n\n        var saveCard = \"\";\n        if (this.state.showSavePopover) {\n            saveCard = (\n                <div className=\"card m-1 float-right\" style={{minWidth : \"500px\"}}>\n                    <div className=\"card-header float-left\">Store Filter:\n                        <button type=\"button\" className=\"mr-1 btn btn-danger btn-sm float-right\">\n                            <i className=\"fa fa-times\" aria-hidden=\"true\" style={{padding: \"4 4 3 4\"}} onClick={() => this.setState({showSavePopover : false})}></i> \n                        </button>\n                    </div>\n                <div className=\"card-body\">\n                      <div className=\"input-group mb-3\">\n                            <div className=\"input-group-prepend\">\n                                  <button type=\"button\" className=\"btn btn-outline-secondary\" title=\"Assign a color to this filter\" onClick={(e) => $(\"#color-picker-filter\").click()}>\n                                      <span className=\"badge badge-pill badge-primary\" style={filterPillStyle , {backgroundColor : this.state.filterColor, verticalAlign : 'text-bottom'}}>\n                                          <i className=\"fa fa-filter\" aria-hidden=\"true\"></i>\n                                      </span>\n                                  </button>\n                                  <input key=\"cc-0\" type=\"color\" className=\"hidden\" style={{display: \"none\"}} name=\"eventColor\" onChange={e => this.setState({filterColor: e.target.value})} value={this.state.filterColor} id=\"color-picker-filter\"/>\n                            </div>\n                                <input type=\"text\" className=\"form-control\" placeholder=\"Filter Name\" aria-label=\"Filter Name\" aria-describedby=\"basic-addon2\" value={this.state.filterName} onChange={e => this.setState({ filterName : e.target.value })} />\n                            <div className=\"input-group-append\">\n                                  <button type=\"button\" id='save-filter-button-card' className=\"btn btn-outline-secondary\" onClick={() => {this.saveFilter()}} data-toggle=\"tooltip\" data-trigger='manual' data-placement=\"top\" data-title='A filter with that name already exists in your fleet. Please provide a unique name.'>Save</button>\n                            </div>\n                      </div>\n                  </div>\n              </div>\n            );\n        }\n\n        var loadCard = \"\";\n        if (this.state.showLoadPopover) {\n            let filters = this.getStoredFilters();\n            if(filters != null && filters.length > 0) {\n                loadCard = (\n                    <div className=\"card m-1 float-right\" style={{minWidth : \"800px\"}}>\n                            <div className=\"card-header float-left\">Saved Filters:\n                                <button type=\"button\" className=\"mr-2 btn btn-danger btn-sm float-right\">\n                                    <i className=\"fa fa-times\" aria-hidden=\"true\" style={{padding: \"4 4 3 4\"}} onClick={() => this.setState({showLoadPopover : false})}></i> \n                                </button>\n                            </div>\n                        <div className=\"card-body\" style={{maxHeight : \"400px\", overflowY : \"scroll\"}}>\n                            <ul className=\"list-group\">\n                            {\n                                filters.map((filter, index) => {\n                                    let initColor = filter.color;\n                                    let newColor = JSON.parse(JSON.stringify(this.state.filterColor)); //make copy for each index\n                                    //Normal\n                                    let editButton = ( \n                                        <button className=\"m-1 btn btn-outline-primary align-right\" style={styleButtonSq} onClick={() => this.editFilter(filter)} title=\"Edit Filter\">\n                                            <i className=\"fa fa-pencil\" aria-hidden=\"true\"></i> \n                                        </button>\n                                    );\n\n                                    let nameField = (\n                                        <div className=\"col-lg-10\">\n                                            <button type=\"button\" className=\"m-1 btn btn-secondary\" onClick={() => this.setFilter(filter)} key={index} style={{lineHeight : '1', fontSize : '100%', marginRight : '4px', backgroundColor : '#e3e3e3', color : '#000000'}} title=\"Filter Info\">\n                                                <span className=\"badge badge-pill badge-primary\" style={filterPillStyle , {backgroundColor : filter.color, verticalAlign : 'text-bottom'}}>\n                                                    <i className=\"fa fa-filter\" aria-hidden=\"true\"></i>\n                                                </span>\n                                                <span className=\"ml-2 font-weight-bold\">\n                                                    {filter.name}\n                                                </span>\n                                            </button>\n                                        </div>\n                                    );\n\n                                    if (filter.name == this.state.editingFilter.name) {\n                                        //When editing \n                                        editButton = (\n                                            <button className=\"m-1 btn btn-outline-success align-right\" id='modify-filter-submit-button' onClick={() => this.submitChanges(filter)} data-toggle=\"tooltip\" data-trigger='manual' data-placement=\"top\" title=\"Submit Changes\" data-title=\"A filter in your fleet already exists with that name! Please choose another name.\">\n                                                <i className='fa fa-check' aria-hidden='true'></i>\n                                            </button>\n                                        );\n\n                                        nameField = (\n                                              <><div className=\"col-lg-9 input-group mb-3\">\n                                                    <div className=\"input-group-prepend\">\n                                                          <button type=\"button\" className=\"btn btn-outline-secondary\" title=\"Assign a different color to this filter\" onClick={(e) => $(\"#color-picker-filter-mod\").click()}>\n                                                              <span className=\"badge badge-pill badge-primary\" style={filterPillStyle , {backgroundColor : this.state.filterColor, verticalAlign : 'text-bottom'}}>\n                                                                  <i className=\"fa fa-filter\" aria-hidden=\"true\"></i>\n                                                              </span>\n                                                          </button>\n                                                          <input key=\"cc-1\" type=\"color\" className=\"hidden\" style={{display: \"none\"}} name=\"eventColor\" onChange={e => this.setState({filterColor: e.target.value})} value={this.state.filterColor} id=\"color-picker-filter-mod\"/>\n                                                    </div>\n                                                    <input type=\"text\" className=\"form-control\" aria-label=\"Filter Name\" aria-describedby=\"basic-addon2\" value={this.state.filterName} onChange={e => this.setState({ filterName : e.target.value })} />\n                                              </div>\n                                              <div className=\"col-lg-1\">\n                                                    <button className=\"m-1 btn btn-outline-danger align-right\" style={styleButtonSq} onClick={e => this.setState({editingFilter : {}})} title=\"Discard Changes\">\n                                                        <i className=\"fa fa-times\" aria-hidden=\"true\"></i>\n                                                    </button>\n                                              </div></>\n                                        );\n                                    }\n\n                                    return (\n                                        <li className=\"list-group-item\" key={index}>\n                                            <div className=\"container\">\n                                                <div className=\"row justify-content-md-center\">\n                                                    {nameField}\n                                                    <div className=\"col-lg-1\">\n                                                        {editButton}\n                                                    </div>\n                                                    <div className=\"col-lg-1\">\n                                                        <button className=\"m-1 btn btn-outline-primary align-right\" style={styleButtonSq} onClick={() => this.deleteFilterClicked(filter.name)} title=\"Delete this filter\">\n                                                            <i className=\"fa fa-trash\" aria-hidden=\"true\"></i>\n                                                        </button>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </li>\n                                    );\n                                })\n                            }\n                        </ul>\n                    </div>\n                </div>\n            );\n            } else {\n                loadCard = (\n                    <div className=\"card m-1 float-right\" style={{maxWidth : \"500px\"}}>\n                        <div className=\"card-header float-left\">No filters stored yet.\n                            <button type=\"button\" className=\"mr-2 btn btn-danger btn-sm float-right\">\n                                <i className=\"fa fa-times\" aria-hidden=\"true\" style={{padding: \"4 4 3 4\"}} onClick={() => this.setState({showLoadPopover : false})}></i> \n                            </button>\n                        </div>\n                        <div className=\"card-body\">\n                            No filters stored yet for this fleet.\n                        </div>\n                    </div>\n                );\n            }\n        }\n\n        let submitHidden = true;\n        let submitDisabled = true;\n        if (typeof this.props.submitButtonName !== 'undefined') {\n            submitHidden = false;\n            submitDisabled = !isValidFilter(this.props.filters, this.props.rules);\n            this.state.saveButtonDisabled = !isValidFilter(this.props.filters, this.props.rules) || this.state.filterSaved;\n            this.state.filterSaved = false;\n        }\n\n        return (\n            <div className=\"card mb-1 m-1 border-secondary\" style={{background : \"rgba(248,259,250,0.8)\", margin:0}}>\n                <div className=\"d-flex justify-content-between\">\n\n                    <div className=\"p-2\">\n                        <div className=\"btn-group btn-group-toggle\" data-toggle=\"buttons\">\n                            <label className={\"btn btn-outline-primary btn-sm \" + andActive} onClick={() => this.props.setFilter(andClicked(this.props.getFilter(), this.props.treeIndex))}>\n                                <input type=\"radio\" name=\"options\" id=\"option1\" autoComplete=\"off\" defaultChecked={andChecked} />AND\n                            </label>\n                            <label className={\"btn btn-outline-primary btn-sm \" + orActive} onClick={() => this.props.setFilter(orClicked(this.props.getFilter(), this.props.treeIndex))}>\n                                <input type=\"radio\" name=\"options\" id=\"option2\" autoComplete=\"off\" defaultChecked={!andChecked} />OR\n                            </label> \n                        </div>\n\n                    </div>\n\n                    <div className=\"p-2\">\n                        <button type=\"button\" className=\"btn btn-primary btn-sm mr-1\" onClick={() => this.props.setFilter(addRule(this.props.getFilter(), this.props.treeIndex))}>Add Rule</button>\n                        <button type=\"button\" className=\"btn btn-primary btn-sm mr-1\" onClick={() => this.props.setFilter(addGroup(this.props.getFilter(), this.props.treeIndex))}>Add Group</button>\n                        <button type=\"button\" className=\"btn btn-danger btn-sm\"> <i className=\"fa fa-times\" aria-hidden=\"true\" style={{padding: \"4 4 3 4\"}} onClick={() => this.props.setFilter(removeFilter(this.props.getFilter(), this.props.treeIndex))}></i> </button>\n                    </div>\n                </div>\n\n                {\n                    this.props.filters.filters.map((filterInfo, index) => {\n                        if (filterInfo.type === \"GROUP\") {\n                            return (\n                                <div className=\"p-2\" key={this.props.treeIndex + \",\" + index}>\n                                    <Group\n                                        key={this.props.treeIndex + \",\" + index}\n                                        treeIndex={this.props.treeIndex + \",\" + index}\n                                        rules={this.props.rules}\n                                        filters={filterInfo}\n                                        getStoredFilters={() => this.props.getStoredFilters()}\n                                        getFilter={() => {return this.props.getFilter()}}\n                                        setFilter={(filter) => this.props.setFilter(filter)}\n                                        setSortByColumn={(sortColumn) => this.props.setSortByColumn(sortColumn)}\n                                        getSortByColumn={() => {return this.props.getSortByColumn}}\n                                    />\n                                </div>);\n\n                        } else if (filterInfo.type === \"RULE\") {\n                            return (\n                                <div className=\"p-2\" key={this.props.treeIndex + \",\" + index}>\n                                    <Rule\n                                        key={this.props.treeIndex + \",\" + index}\n                                        treeIndex={this.props.treeIndex + \",\" + index}\n                                        rules={this.props.rules}\n                                        filter={filterInfo}\n                                        getStoredFilters={() => this.props.getStoredFilters()}\n                                        getFilter={() => {return this.props.getFilter()}}\n                                        setFilter={(filter) => this.props.setFilter(filter)}\n                                    />\n                                </div>);\n                        }\n                    })\n                }\n\n                <div className=\"d-flex justify-content-end\">\n                    <div className=\"p-2 flex-fill\">\n                        <span style={errorMessageStyle} hidden={errorHidden}>{errorMessage}</span>\n                    </div>\n\n                    <div className=\"p-2\">\n                          <button type=\"button\" className=\"btn btn-primary btn-sm mr-1\" hidden={submitHidden} onClick={(event) => this.handleLoadClick(event)} id={loadFilterButtonId} data-toggle='tooltip' data-placement='top' data-trigger='manual' data-title='Changes Saved!'>\n                              Load a Saved Filter\n                          </button>\n                          <button id=\"save-filter-button\" type=\"button\" className=\"btn btn-primary btn-sm mr-1\" onClick={handleSaveClick} hidden={submitHidden} disabled={this.state.saveButtonDisabled} data-toggle=\"tooltip\" data-trigger='manual' data-placement=\"top\" title=\"Filter saved successfully\">\n                              Save Filter\n                          </button>\n                        <button type=\"button\" className=\"btn btn-primary btn-sm mr-1\" disabled={submitDisabled} onClick={() => this.props.submitFilter(true /*reset current page*/)} hidden={submitHidden} >\n                            {this.props.submitButtonName}\n                        </button>\n                    </div>\n\n                </div>\n                <div className=\"container\" style={{maxWidth : '100%'}}>\n                    <div className=\"d-flex flex-row-reverse\">\n                        {saveCard}\n                        {loadCard}\n                    </div>\n                </div>\n            </div>\n\n        );\n    }\n}\n\nclass Filter extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        return (\n            <div className=\"card-body\" hidden={!this.props.filterVisible} style={{padding:0, margin:0}}>\n                <Group\n                    treeIndex=\"root\" \n                    submitButtonName={this.props.submitButtonName}\n                    rules={this.props.rules}\n                    filters={this.props.filters}\n                    getFilter={() => {return this.props.getFilter()}}\n                    setFilter={(filter) => this.props.setFilter(filter)}\n                    submitFilter={() => this.props.submitFilter()}\n                    setSortByColumn={(sortColumn) => this.props.setSortByColumn(sortColumn)}\n                    getSortByColumn={() => {return this.props.getSortByColumn}}\n                />\n\n            </div>\n        );\n    }\n}\n\nexport { Filter };\n"],"mappings":"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"}]}