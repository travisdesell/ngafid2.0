{"remainingRequest":"/home/alabella/RIT/CSResearch/D2S2/ngafid2.0/node_modules/babel-loader/lib/index.js??ref--4-1!/home/alabella/RIT/CSResearch/D2S2/ngafid2.0/src/main/javascript/create_event.js","dependencies":[{"path":"/home/alabella/RIT/CSResearch/D2S2/ngafid2.0/src/main/javascript/create_event.js","mtime":1589665823133},{"path":"/home/alabella/RIT/CSResearch/D2S2/ngafid2.0/.babelrc","mtime":1589665823083},{"path":"/home/alabella/RIT/CSResearch/D2S2/ngafid2.0/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alabella/RIT/CSResearch/D2S2/ngafid2.0/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nimport 'bootstrap';\nimport React, { Component } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { errorModal } from \"./error_modal.js\";\nimport { navbar } from \"./signed_in_navbar.js\";\nimport { Filter } from './filter.js';\nairframes.unshift(\"All Airframes (Generic)\");\nvar rules = [];\n\nfor (var i = 0; i < doubleTimeSeriesNames.length; i++) {\n  rules.push({\n    name: doubleTimeSeriesNames[i],\n    conditions: [{\n      type: \"select\",\n      name: \"condition\",\n      options: [\"<=\", \"<\", \">\", \">=\"]\n    }, {\n      type: \"number\",\n      name: \"number\"\n    }]\n  });\n}\n\nvar CreateEventCard =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CreateEventCard, _React$Component);\n\n  function CreateEventCard(props) {\n    var _this;\n\n    _classCallCheck(this, CreateEventCard);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CreateEventCard).call(this, props));\n    _this.state = {\n      mapVisible: false,\n      plotVisible: false,\n      filterVisible: true,\n      eventName: \"\",\n      airframe: 0,\n      startBuffer: \"\",\n      stopBuffer: \"\"\n    };\n    _this.exceedenceFilter = React.createRef();\n    _this.severityFilter = React.createRef();\n    return _this;\n  }\n\n  _createClass(CreateEventCard, [{\n    key: \"validateEventName\",\n    value: function validateEventName(event) {\n      var eventName = event.target.value;\n      console.log(\"new event name: \" + eventName);\n      this.setState({\n        eventName: eventName\n      });\n    }\n  }, {\n    key: \"validateAirframe\",\n    value: function validateAirframe(event) {\n      var airframe = event.target.value;\n      console.log(\"new airframe: \" + airframe);\n      this.setState({\n        airframe: airframe\n      });\n    }\n  }, {\n    key: \"validateStartBuffer\",\n    value: function validateStartBuffer(event) {\n      var startBuffer = event.target.value;\n      console.log(\"new startBuffer: \" + startBuffer);\n      this.setState({\n        startBuffer: startBuffer\n      });\n    }\n  }, {\n    key: \"validateStopBuffer\",\n    value: function validateStopBuffer(event) {\n      var stopBuffer = event.target.value;\n      console.log(\"new stopBuffer: \" + stopBuffer);\n      this.setState({\n        stopBuffer: stopBuffer\n      });\n    }\n  }, {\n    key: \"submitFilter\",\n    value: function submitFilter() {\n      //console.log( this.state.filters );\n      var query = this.exceedenceFilter.current.getQuery();\n      console.log(\"Submitting filters:\");\n      console.log(query);\n      $(\"#loading\").show();\n      var submissionData = {\n        filterQuery: JSON.stringify(query),\n        eventName: this.state.eventName,\n        startBuffer: this.state.startBuffer,\n        stopBuffer: this.state.stopBuffer,\n        airframe: airframes[this.state.airframe]\n      };\n      console.log(submissionData);\n      $.ajax({\n        type: 'POST',\n        url: '/protected/create_event',\n        data: submissionData,\n        dataType: 'json',\n        success: function success(response) {\n          console.log(\"received response: \");\n          console.log(response);\n          $(\"#loading\").hide();\n\n          if (response.errorTitle) {\n            console.log(\"displaying error modal!\");\n            errorModal.show(response.errorTitle, response.errorMessage);\n            return false;\n          } //createEventCard.setEvents(response);\n\n        },\n        error: function error(jqXHR, textStatus, errorThrown) {\n          errorModal.show(\"Error Loading Flights\", errorThrown);\n        },\n        async: true\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      console.log(\"rendering events!\");\n      var style = {\n        padding: 5\n      };\n      var formGroupStyle = {\n        marginBottom: '0px',\n        padding: '0 4 0 4'\n      };\n      var formHeaderStyle = {\n        width: '200px',\n        flex: '0 0 200px'\n      };\n      var labelStyle = {\n        padding: '7 0 7 0',\n        margin: '0',\n        display: 'block',\n        textAlign: 'right'\n      };\n      var bgStyle = {\n        background: \"rgba(248,259,250,0.8)\",\n        margin: 0\n      };\n      var validationMessageStyle = {\n        padding: '7 0 7 0',\n        margin: '0',\n        display: 'block',\n        textAlign: 'left',\n        color: 'red'\n      };\n      var validationMessage = \"\";\n\n      if (this.state.eventName == \"\") {\n        validationMessage = \"Please enter an event name.\";\n      } else if (this.state.startBuffer == \"\") {\n        validationMessage = \"Please enter a start buffer time.\";\n      } else if (parseInt(this.state.startBuffer) < 1) {\n        validationMessage = \"Start buffer time must be greater than 1 second.\";\n      } else if (this.state.stopBuffer == \"\") {\n        validationMessage = \"Please enter a stop buffer time.\";\n      } else if (parseInt(this.state.startBuffer) < 1) {\n        validationMessage = \"Stop buffer time must be greater than 1 second.\"; //first time rendering this component exceedenceFilter will not be defined\n      } else if (typeof this.exceedenceFilter != 'undefined') {\n        console.log(\"checking exceedenceFilter isValid\");\n\n        if (!this.exceedenceFilter.current.isValid()) {\n          validationMessage = \"Correct the incomplete filter.\";\n        }\n      }\n\n      var validationHidden = validationMessage == \"\";\n      var updateProfileDisabled = !validationHidden;\n      console.log(\"airframes:\");\n      console.log(airframes);\n      return React.createElement(\"div\", {\n        className: \"card-body\",\n        style: style\n      }, React.createElement(\"div\", {\n        className: \"card mb-1\",\n        style: bgStyle\n      }, React.createElement(\"h5\", {\n        className: \"card-header\"\n      }, \"Create Event\"), React.createElement(\"div\", {\n        className: \"form-group\",\n        style: formGroupStyle\n      }, React.createElement(\"div\", {\n        className: \"d-flex\"\n      }, React.createElement(\"div\", {\n        className: \"p-2\",\n        style: formHeaderStyle\n      }, React.createElement(\"label\", {\n        htmlFor: \"eventName\",\n        style: labelStyle\n      }, \"Event name\")), React.createElement(\"div\", {\n        className: \"p-2 flex-fill\"\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        id: \"eventName\",\n        \"aria-describedby\": \"eventName\",\n        placeholder: \"Enter event name\",\n        onChange: function onChange(event) {\n          return _this2.validateEventName(event);\n        },\n        value: this.state.eventName\n      })))), React.createElement(\"div\", {\n        className: \"form-group\",\n        style: formGroupStyle\n      }, React.createElement(\"div\", {\n        className: \"d-flex\"\n      }, React.createElement(\"div\", {\n        className: \"p-2\",\n        style: formHeaderStyle\n      }, React.createElement(\"label\", {\n        htmlFor: \"airframeSelect\",\n        style: labelStyle\n      }, \"Event for\")), React.createElement(\"div\", {\n        className: \"p-2 flex-fill\"\n      }, React.createElement(\"select\", {\n        id: \"airframeSelect\",\n        className: \"form-control\",\n        onChange: function onChange(event) {\n          return _this2.validateAirframe(event);\n        },\n        value: this.state.airframe\n      }, airframes.map(function (airframeInfo, index) {\n        return React.createElement(\"option\", {\n          key: index,\n          value: index\n        }, airframeInfo);\n      }))))), React.createElement(\"div\", {\n        className: \"form-group\",\n        style: formGroupStyle\n      }, React.createElement(\"div\", {\n        className: \"d-flex\"\n      }, React.createElement(\"div\", {\n        className: \"p-2\",\n        style: formHeaderStyle\n      }, React.createElement(\"label\", {\n        htmlFor: \"startBuffer\",\n        style: labelStyle\n      }, \"Start buffer (seconds)\")), React.createElement(\"div\", {\n        className: \"p-2 flex-fill\"\n      }, React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control\",\n        id: \"eventName\",\n        \"aria-describedby\": \"startBuffer\",\n        placeholder: \"Enter seconds\",\n        min: \"1\",\n        onChange: function onChange(event) {\n          return _this2.validateStartBuffer(event);\n        },\n        value: this.state.startBuffer\n      })))), React.createElement(\"div\", {\n        className: \"form-group\",\n        style: formGroupStyle\n      }, React.createElement(\"div\", {\n        className: \"d-flex\"\n      }, React.createElement(\"div\", {\n        className: \"p-2\",\n        style: formHeaderStyle\n      }, React.createElement(\"label\", {\n        htmlFor: \"stopBuffer\",\n        style: labelStyle\n      }, \"Stop buffer (seconds)\")), React.createElement(\"div\", {\n        className: \"p-2 flex-fill\"\n      }, React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control\",\n        id: \"eventName\",\n        \"aria-describedby\": \"stopBuffer\",\n        placeholder: \"Enter seconds\",\n        min: \"1\",\n        onChange: function onChange(event) {\n          return _this2.validateStopBuffer(event);\n        },\n        value: this.state.stopBuffer\n      })))), React.createElement(\"div\", {\n        className: \"form-group\",\n        style: formGroupStyle\n      }, React.createElement(\"div\", {\n        className: \"d-flex\"\n      }, React.createElement(\"div\", {\n        className: \"p-2\",\n        style: formHeaderStyle\n      }, React.createElement(\"label\", {\n        style: labelStyle\n      }, \"Exceedence Definition\")), React.createElement(\"div\", {\n        className: \"p-2 flex-fill\"\n      }, React.createElement(Filter, {\n        ref: this.exceedenceFilter,\n        depth: 0,\n        baseIndex: \"[0-0]\",\n        key: \"[0-0]\",\n        parent: null,\n        type: \"GROUP\",\n        parentRerender: function parentRerender() {\n          _this2.forceUpdate();\n        },\n        rules: rules,\n        submitButtonName: \"Create Event\",\n        externalSubmit: true\n      })))), React.createElement(\"div\", {\n        className: \"d-flex\"\n      }, React.createElement(\"div\", {\n        className: \"p-2\",\n        style: formHeaderStyle\n      }), React.createElement(\"div\", {\n        className: \"p-2 flex-fill\"\n      }, React.createElement(\"span\", {\n        style: validationMessageStyle,\n        hidden: validationHidden\n      }, validationMessage)), React.createElement(\"div\", {\n        className: \"p-2\"\n      }, React.createElement(\"button\", {\n        className: \"btn btn-primary float-right\",\n        onClick: function onClick() {\n          _this2.submitFilter();\n        },\n        disabled: updateProfileDisabled\n      }, \"Create Event\")))));\n    }\n  }]);\n\n  return CreateEventCard;\n}(React.Component);\n\nvar createEventCard = ReactDOM.render(React.createElement(CreateEventCard, null), document.querySelector('#create-event-card'));",null]}