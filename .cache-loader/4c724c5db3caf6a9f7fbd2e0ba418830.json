{"remainingRequest":"/ngafid/ngafid2.0/node_modules/babel-loader/lib/index.js??ruleSet[1].rules[0].use[1]!/ngafid/ngafid2.0/src/main/javascript/welcome.js","dependencies":[{"path":"/ngafid/ngafid2.0/src/main/javascript/welcome.js","mtime":1667313547815},{"path":"/ngafid/ngafid2.0/.babelrc","mtime":1664810261182},{"path":"/ngafid/ngafid2.0/node_modules/cache-loader/dist/cjs.js","mtime":1664910647113},{"path":"/ngafid/ngafid2.0/node_modules/babel-loader/lib/index.js","mtime":1664910647213}],"contextDependencies":[],"result":["function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport 'bootstrap';\nimport React, { Component } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { errorModal } from \"./error_modal.js\";\nimport SignedInNavbar from \"./signed_in_navbar.js\";\nimport TimeHeader from \"./time_header.js\";\nimport Plotly from 'plotly.js';\nairframes.unshift(\"All Airframes\");\nvar index = airframes.indexOf(\"Garmin Flight Display\");\nif (index !== -1) airframes.splice(index, 1);\nconsole.log(eventCounts);\n\nfunction displayPlots(selectedAirframe) {\n  console.log(\"displaying plots with airframe: '\" + selectedAirframe + \"'\");\n  var countData = [];\n  var percentData = [];\n  var fleetPercents = {\n    name: 'Your Fleet',\n    type: 'bar',\n    orientation: 'h',\n    hoverinfo: 'y+text',\n    hovertext: [],\n    y: [],\n    x: [],\n    flightsWithEventCounts: [],\n    totalFlightsCounts: []\n  };\n  var ngafidPercents = {\n    name: 'All Other Fleets',\n    type: 'bar',\n    orientation: 'h',\n    hoverinfo: 'y+text',\n    hovertext: [],\n    y: [],\n    x: [],\n    flightsWithEventCounts: [],\n    totalFlightsCounts: []\n  };\n\n  for (var _i = 0, _Object$entries = Object.entries(eventCounts); _i < _Object$entries.length; _i++) {\n    var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),\n        key = _Object$entries$_i[0],\n        value = _Object$entries$_i[1];\n\n    if (value.airframeName === \"Garmin Flight Display\") continue;\n    if (selectedAirframe !== value.airframeName && selectedAirframe !== \"All Airframes\") continue; //console.log(key);\n    //console.log(value);\n\n    value.name = value.airframeName;\n    value.y = value.names;\n    value.type = 'bar';\n    value.orientation = 'h'; //value.hoverinfo = 'text';\n    //don't add airframes to the count plot that the fleet doesn't have\n\n    if (airframes.indexOf(value.airframeName) >= 0) countData.push(value);\n    value.x = value.totalEventsCounts;\n\n    for (var i = 0; i < value.names.length; i++) {\n      //don't add airframes to the fleet percentage plot that the fleet doesn't have\n      if (airframes.indexOf(value.airframeName) >= 0) {\n        var index = fleetPercents.y.indexOf(value.names[i]);\n\n        if (index !== -1) {\n          fleetPercents.flightsWithEventCounts[index] += value.flightsWithEventCounts[i];\n          fleetPercents.totalFlightsCounts[index] += value.totalFlightsCounts[i];\n        } else {\n          var pos = fleetPercents.y.length;\n          fleetPercents.y.push(value.names[i]);\n          fleetPercents.flightsWithEventCounts[pos] = value.flightsWithEventCounts[i];\n          fleetPercents.totalFlightsCounts[pos] = value.totalFlightsCounts[i];\n        }\n      }\n\n      var index = ngafidPercents.y.indexOf(value.names[i]);\n\n      if (index !== -1) {\n        ngafidPercents.flightsWithEventCounts[index] += value.aggregateFlightsWithEventCounts[i];\n        ngafidPercents.totalFlightsCounts[index] += value.aggregateTotalFlightsCounts[i];\n      } else {\n        var _pos = ngafidPercents.y.length;\n        ngafidPercents.y.push(value.names[i]);\n        ngafidPercents.flightsWithEventCounts[_pos] = value.aggregateFlightsWithEventCounts[i];\n        ngafidPercents.totalFlightsCounts[_pos] = value.aggregateTotalFlightsCounts[i];\n      }\n    }\n  }\n\n  percentData.push(ngafidPercents);\n  percentData.push(fleetPercents);\n  console.log(\"fleetPercents:\");\n  console.log(fleetPercents);\n  console.log(ngafidPercents);\n\n  for (var j = 0; j < percentData.length; j++) {\n    var _value = percentData[j];\n    _value.x = [];\n\n    for (var _i2 = 0; _i2 < _value.totalFlightsCounts.length; _i2++) {\n      _value.x.push(100.0 * parseFloat(_value.flightsWithEventCounts[_i2]) / parseFloat(_value.totalFlightsCounts[_i2])); //console.log(value.x[i]);\n\n\n      var fixedText = \"\";\n\n      if (_value.x[_i2] > 0 && _value.x[_i2] < 1) {\n        //console.log(\"Log10 of x is \" + Math.log10(value.x[i]));\n        fixedText = _value.x[_i2].toFixed(-Math.ceil(Math.log10(_value.x[_i2])) + 2) + \"%\";\n      } else {\n        fixedText = _value.x[_i2].toFixed(2) + \"%\";\n      }\n\n      _value.hovertext.push(fixedText); //console.log(\"converted to \" + fixedText);\n\n    }\n  }\n\n  var countLayout = {\n    title: 'Event Counts',\n    barmode: 'stack',\n    //autosize: false,\n    //width: 500,\n    //height: 500,\n    margin: {\n      l: 250,\n      r: 50,\n      b: 50,\n      t: 50,\n      pad: 4\n    }\n  };\n  var percentLayout = {\n    title: 'Percentage of Flights With Event',\n    //autosize: false,\n    //width: 500,\n    //height: 500,\n    margin: {\n      l: 250,\n      r: 50,\n      b: 50,\n      t: 50,\n      pad: 4\n    }\n  };\n  var config = {\n    responsive: true\n  };\n  Plotly.newPlot('event-counts-plot', countData, countLayout, config);\n  Plotly.newPlot('event-percents-plot', percentData, percentLayout, config);\n}\n\nvar Notifications = /*#__PURE__*/function (_React$Component) {\n  _inherits(Notifications, _React$Component);\n\n  var _super = _createSuper(Notifications);\n\n  function Notifications(props) {\n    var _this;\n\n    _classCallCheck(this, Notifications);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      notifications: [{\n        count: waitingUserCount,\n        message: \"users waiting for access\",\n        badgeType: \"badge-info\"\n      }, {\n        count: unconfirmedTailsCount,\n        message: \"tail numbers need to be confirmed\",\n        badgeType: \"badge-info\"\n      }, {\n        count: uploadsNotImported,\n        message: \"uploads waiting to be imported\",\n        badgeType: \"badge-warning\"\n      }, {\n        count: uploadsWithError,\n        message: \"uploads with processing errors\",\n        badgeType: \"badge-danger\"\n      }, {\n        count: flightsWithWarning,\n        message: \"flights with import warnings\",\n        badgeType: \"badge-warning\"\n      }, {\n        count: flightsWithError,\n        message: \"flights with import errors\",\n        badgeType: \"badge-danger\"\n      }]\n    };\n    return _this;\n  }\n\n  _createClass(Notifications, [{\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card mb-2 m-2\",\n        style: {\n          background: \"rgba(248,259,250,0.8)\",\n          height: \"258px\"\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"card-header\",\n        style: {\n          color: \"rgba(75,75,75,250)\"\n        }\n      }, \"Notifications\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-body\"\n      }, /*#__PURE__*/React.createElement(\"table\", null, /*#__PURE__*/React.createElement(\"tbody\", null, this.state.notifications.map(function (info, index) {\n        if (info.count == 0) {\n          return;\n        } else {\n          return /*#__PURE__*/React.createElement(\"tr\", {\n            key: index\n          }, /*#__PURE__*/React.createElement(\"td\", {\n            style: {\n              textAlign: \"right\",\n              paddingBottom: \"6\"\n            }\n          }, /*#__PURE__*/React.createElement(\"span\", {\n            className: 'badge ' + info.badgeType\n          }, Number(info.count).toLocaleString('en'))), /*#__PURE__*/React.createElement(\"td\", {\n            style: {\n              paddingBottom: \"6\"\n            }\n          }, \"\\xA0\", info.message));\n        }\n      })))));\n    }\n  }]);\n\n  return Notifications;\n}(React.Component);\n\nvar WelcomePage = /*#__PURE__*/function (_React$Component2) {\n  _inherits(WelcomePage, _React$Component2);\n\n  var _super2 = _createSuper(WelcomePage);\n\n  function WelcomePage(props) {\n    var _this2;\n\n    _classCallCheck(this, WelcomePage);\n\n    _this2 = _super2.call(this, props);\n    var date = new Date();\n    _this2.state = {\n      airframe: \"All Airframes\",\n      startYear: 2020,\n      startMonth: 1,\n      endYear: date.getFullYear(),\n      endMonth: date.getMonth() + 1,\n      datesChanged: false\n    };\n    return _this2;\n  }\n\n  _createClass(WelcomePage, [{\n    key: \"updateStartYear\",\n    value: function updateStartYear(newStartYear) {\n      console.log(\"setting new start year to: \" + newStartYear);\n      this.setState({\n        startYear: newStartYear,\n        datesChanged: true\n      });\n      console.log(this.state);\n    }\n  }, {\n    key: \"updateStartMonth\",\n    value: function updateStartMonth(newStartMonth) {\n      console.log(\"setting new start month to: \" + newStartMonth);\n      this.setState({\n        startMonth: newStartMonth,\n        datesChanged: true\n      });\n      console.log(this.state);\n    }\n  }, {\n    key: \"updateEndYear\",\n    value: function updateEndYear(newEndYear) {\n      console.log(\"setting new end year to: \" + newEndYear);\n      this.setState({\n        endYear: newEndYear,\n        datesChanged: true\n      });\n      console.log(this.state);\n    }\n  }, {\n    key: \"updateEndMonth\",\n    value: function updateEndMonth(newEndMonth) {\n      console.log(\"setting new end month to: \" + newEndMonth);\n      this.setState({\n        endMonth: newEndMonth,\n        datesChanged: true\n      });\n      console.log(this.state);\n    }\n  }, {\n    key: \"dateChange\",\n    value: function dateChange() {\n      console.log(\"[welcomecard] notifying date change 2, startYear: '\" + this.state.startYear + \"', startMonth: '\" + this.state.startMonth + \", endYear: '\" + this.state.endYear + \"', endMonth: '\" + this.state.endMonth + \"'\");\n      var startDate = this.state.startYear + \"-\";\n      var endDate = this.state.endYear + \"-\"; //0 pad the months on the front\n\n      if (parseInt(this.state.startMonth) < 10) startDate += \"0\" + parseInt(this.state.startMonth);else startDate += this.state.startMonth;\n      if (parseInt(this.state.endMonth) < 10) endDate += \"0\" + parseInt(this.state.endMonth);else endDate += this.state.endMonth;\n      var submission_data = {\n        startDate: startDate + \"-01\",\n        endDate: endDate + \"-28\"\n      };\n      $('#loading').show();\n      console.log(\"showing loading spinner!\");\n      var welcomePage = this;\n      $.ajax({\n        type: 'POST',\n        url: '/protected/event_counts',\n        data: submission_data,\n        dataType: 'json',\n        success: function success(response) {\n          console.log(\"received response: \");\n          console.log(response);\n          $('#loading').hide();\n\n          if (response.err_msg) {\n            errorModal.show(response.err_title, response.err_msg);\n            return;\n          }\n\n          eventCounts = response;\n          displayPlots(welcomePage.state.airframe);\n          welcomePage.setState({\n            datesChanged: false\n          });\n        },\n        error: function error(jqXHR, textStatus, errorThrown) {\n          errorModal.show(\"Error Loading Uploads\", errorThrown);\n        },\n        async: true\n      });\n    }\n  }, {\n    key: \"airframeChange\",\n    value: function airframeChange(airframe) {\n      this.setState({\n        airframe: airframe\n      });\n      displayPlots(airframe);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      //console.log(systemIds);\n      var numberOptions = {\n        minimumFractionDigits: 2,\n        maximumFractionDigits: 2\n      };\n      return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(SignedInNavbar, {\n        activePage: \"welcome\",\n        waitingUserCount: waitingUserCount,\n        fleetManager: fleetManager,\n        unconfirmedTailsCount: unconfirmedTailsCount,\n        modifyTailsAccess: modifyTailsAccess,\n        plotMapHidden: plotMapHidden\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container-fluid\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-lg-6\",\n        style: {\n          paddingRight: \"0\"\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card mb-2 m-2\",\n        style: {\n          background: \"rgba(248,259,250,0.8)\"\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"card-header\",\n        style: {\n          color: \"rgba(75,75,75,250)\"\n        }\n      }, \"Your Fleet\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-body\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-sm-4\"\n      }, /*#__PURE__*/React.createElement(\"h3\", null, Number(flightHours / (60 * 60)).toLocaleString('en', numberOptions)), \" Flight Hours \", /*#__PURE__*/React.createElement(\"br\", null)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-sm-4\"\n      }, /*#__PURE__*/React.createElement(\"h3\", null, Number(numberFlights).toLocaleString('en')), \" Flights \", /*#__PURE__*/React.createElement(\"br\", null)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-sm-4\"\n      }, /*#__PURE__*/React.createElement(\"h3\", null, Number(numberAircraft).toLocaleString('en')), \" Aircraft \", /*#__PURE__*/React.createElement(\"br\", null))), /*#__PURE__*/React.createElement(\"hr\", null), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-sm-4\"\n      }, /*#__PURE__*/React.createElement(\"h3\", null, Number(totalEvents).toLocaleString('en')), \" Total Events\", /*#__PURE__*/React.createElement(\"br\", null)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-sm-4\"\n      }, /*#__PURE__*/React.createElement(\"h3\", null, Number(yearEvents).toLocaleString('en')), \" Events This Year\", /*#__PURE__*/React.createElement(\"br\", null)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-sm-4\"\n      }, /*#__PURE__*/React.createElement(\"h3\", null, Number(monthEvents).toLocaleString('en')), \" Events This Month\", /*#__PURE__*/React.createElement(\"br\", null)))))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-lg-6\",\n        style: {\n          paddingLeft: \"0\"\n        }\n      }, /*#__PURE__*/React.createElement(Notifications, null))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-lg-12\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card mb-2 m-2\",\n        style: {\n          background: \"rgba(248,259,250,0.8)\"\n        }\n      }, /*#__PURE__*/React.createElement(TimeHeader, {\n        name: \"Events\",\n        airframes: airframes,\n        airframe: this.state.airframe,\n        airports: [],\n        runways: [],\n        startYear: this.state.startYear,\n        startMonth: this.state.startMonth,\n        endYear: this.state.endYear,\n        endMonth: this.state.endMonth,\n        datesChanged: this.state.datesChanged,\n        dateChange: function dateChange() {\n          return _this3.dateChange();\n        },\n        airframeChange: function airframeChange(airframe) {\n          return _this3.airframeChange(airframe);\n        },\n        updateStartYear: function updateStartYear(newStartYear) {\n          return _this3.updateStartYear(newStartYear);\n        },\n        updateStartMonth: function updateStartMonth(newStartMonth) {\n          return _this3.updateStartMonth(newStartMonth);\n        },\n        updateEndYear: function updateEndYear(newEndYear) {\n          return _this3.updateEndYear(newEndYear);\n        },\n        updateEndMonth: function updateEndMonth(newEndMonth) {\n          return _this3.updateEndMonth(newEndMonth);\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-body\",\n        style: {\n          padding: \"0\"\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\",\n        style: {\n          margin: \"0\"\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-lg-6\",\n        style: {\n          padding: \"0 8 0 0\"\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"event-counts-plot\"\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-lg-6\",\n        style: {\n          padding: \"0 0 0 8\"\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"event-percents-plot\"\n      })))))))));\n    }\n  }]);\n\n  return WelcomePage;\n}(React.Component);\n\nvar welcomePage = ReactDOM.render( /*#__PURE__*/React.createElement(WelcomePage, null), document.querySelector('#welcome-page'));\ndisplayPlots(\"All Airframes\");",{"version":3,"names":["React","Component","ReactDOM","errorModal","SignedInNavbar","TimeHeader","Plotly","airframes","unshift","index","indexOf","splice","console","log","eventCounts","displayPlots","selectedAirframe","countData","percentData","fleetPercents","name","type","orientation","hoverinfo","hovertext","y","x","flightsWithEventCounts","totalFlightsCounts","ngafidPercents","Object","entries","key","value","airframeName","names","push","totalEventsCounts","i","length","pos","aggregateFlightsWithEventCounts","aggregateTotalFlightsCounts","j","parseFloat","fixedText","toFixed","Math","ceil","log10","countLayout","title","barmode","margin","l","r","b","t","pad","percentLayout","config","responsive","newPlot","Notifications","props","state","notifications","count","waitingUserCount","message","badgeType","unconfirmedTailsCount","uploadsNotImported","uploadsWithError","flightsWithWarning","flightsWithError","background","height","color","map","info","textAlign","paddingBottom","Number","toLocaleString","WelcomePage","date","Date","airframe","startYear","startMonth","endYear","getFullYear","endMonth","getMonth","datesChanged","newStartYear","setState","newStartMonth","newEndYear","newEndMonth","startDate","endDate","parseInt","submission_data","$","show","welcomePage","ajax","url","data","dataType","success","response","hide","err_msg","err_title","error","jqXHR","textStatus","errorThrown","async","numberOptions","minimumFractionDigits","maximumFractionDigits","fleetManager","modifyTailsAccess","plotMapHidden","paddingRight","flightHours","numberFlights","numberAircraft","totalEvents","yearEvents","monthEvents","paddingLeft","dateChange","airframeChange","updateStartYear","updateStartMonth","updateEndYear","updateEndMonth","padding","render","document","querySelector"],"sources":["/ngafid/ngafid2.0/src/main/javascript/welcome.js"],"sourcesContent":["import 'bootstrap';\n\nimport React, { Component } from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport { errorModal } from \"./error_modal.js\";\nimport SignedInNavbar from \"./signed_in_navbar.js\";\n\nimport  TimeHeader from \"./time_header.js\";\n\nimport Plotly from 'plotly.js';\n\n\nairframes.unshift(\"All Airframes\");\nvar index = airframes.indexOf(\"Garmin Flight Display\");\nif (index !== -1) airframes.splice(index, 1);\n\nconsole.log(eventCounts);\n\nfunction displayPlots(selectedAirframe) {\n    console.log(\"displaying plots with airframe: '\" + selectedAirframe + \"'\");\n\n    var countData = [];\n    var percentData = [];\n\n    var fleetPercents = {\n        name : 'Your Fleet',\n        type : 'bar',\n        orientation : 'h',\n        hoverinfo : 'y+text',\n        hovertext : [],\n        y : [],\n        x : [],\n        flightsWithEventCounts : [],\n        totalFlightsCounts : []\n    }\n\n\n    var ngafidPercents = {\n        name : 'All Other Fleets',\n        type : 'bar',\n        orientation : 'h',\n        hoverinfo : 'y+text',\n        hovertext : [],\n        y : [],\n        x : [],\n        flightsWithEventCounts : [],\n        totalFlightsCounts : []\n    }\n\n    for (let [key, value] of Object.entries(eventCounts)) {\n        if (value.airframeName === \"Garmin Flight Display\") continue;\n        if (selectedAirframe !== value.airframeName && selectedAirframe !== \"All Airframes\") continue;\n\n        //console.log(key);\n        //console.log(value);\n\n        value.name = value.airframeName;\n        value.y = value.names;\n        value.type = 'bar';\n        value.orientation = 'h';\n        //value.hoverinfo = 'text';\n\n        //don't add airframes to the count plot that the fleet doesn't have\n        if (airframes.indexOf(value.airframeName) >= 0) countData.push(value);\n        value.x = value.totalEventsCounts;\n\n        for (let i = 0; i < value.names.length; i++) {\n            //don't add airframes to the fleet percentage plot that the fleet doesn't have\n            if (airframes.indexOf(value.airframeName) >= 0) {\n                var index = fleetPercents.y.indexOf(value.names[i]);\n                if (index !== -1) {\n                    fleetPercents.flightsWithEventCounts[index] += value.flightsWithEventCounts[i];\n                    fleetPercents.totalFlightsCounts[index] += value.totalFlightsCounts[i];\n                } else {\n                    let pos = fleetPercents.y.length;\n                    fleetPercents.y.push(value.names[i]);\n                    fleetPercents.flightsWithEventCounts[pos] = value.flightsWithEventCounts[i];\n                    fleetPercents.totalFlightsCounts[pos] = value.totalFlightsCounts[i];\n                }\n            }\n\n            var index = ngafidPercents.y.indexOf(value.names[i]);\n            if (index !== -1) {\n                ngafidPercents.flightsWithEventCounts[index] += value.aggregateFlightsWithEventCounts[i];\n                ngafidPercents.totalFlightsCounts[index] += value.aggregateTotalFlightsCounts[i];\n            } else {\n                let pos = ngafidPercents.y.length;\n                ngafidPercents.y.push(value.names[i]);\n                ngafidPercents.flightsWithEventCounts[pos] = value.aggregateFlightsWithEventCounts[i];\n                ngafidPercents.totalFlightsCounts[pos] = value.aggregateTotalFlightsCounts[i];\n            }\n        }\n    }\n\n    percentData.push(ngafidPercents);\n    percentData.push(fleetPercents);\n\n    console.log(\"fleetPercents:\");\n    console.log(fleetPercents);\n    console.log(ngafidPercents);\n\n    for (let j = 0; j < percentData.length; j++) {\n        let value = percentData[j];\n        value.x = [];\n\n        for (let i = 0; i < value.totalFlightsCounts.length; i++) {\n            value.x.push( 100.0 * parseFloat(value.flightsWithEventCounts[i]) / parseFloat(value.totalFlightsCounts[i]) );\n\n            //console.log(value.x[i]);\n            var fixedText = \"\";\n            if (value.x[i] > 0 && value.x[i] < 1) {\n                //console.log(\"Log10 of x is \" + Math.log10(value.x[i]));\n                fixedText = value.x[i].toFixed(-Math.ceil(Math.log10(value.x[i])) + 2) + \"%\";\n            } else {\n                fixedText = value.x[i].toFixed(2) + \"%\";\n            }\n            value.hovertext.push(fixedText);\n\n            //console.log(\"converted to \" + fixedText);\n        }\n    }\n\n    var countLayout = {\n        title : 'Event Counts',\n        barmode: 'stack',\n        //autosize: false,\n        //width: 500,\n        //height: 500,\n        margin: {\n            l: 250,\n            r: 50,\n            b: 50,\n            t: 50,\n            pad: 4\n        }\n    };\n\n    var percentLayout = {\n        title : 'Percentage of Flights With Event',\n        //autosize: false,\n        //width: 500,\n        //height: 500,\n        margin: {\n            l: 250,\n            r: 50,\n            b: 50,\n            t: 50,\n            pad: 4\n        }\n    };\n\n\n    var config = {responsive: true}\n\n    Plotly.newPlot('event-counts-plot', countData, countLayout, config);\n    Plotly.newPlot('event-percents-plot', percentData, percentLayout, config);\n}\n\n\n\nclass Notifications extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            notifications : [\n                { count : waitingUserCount, message : \"users waiting for access\", badgeType : \"badge-info\" },\n                { count : unconfirmedTailsCount, message : \"tail numbers need to be confirmed\", badgeType : \"badge-info\" },\n                { count : uploadsNotImported, message : \"uploads waiting to be imported\", badgeType : \"badge-warning\" },\n                { count : uploadsWithError, message : \"uploads with processing errors\", badgeType : \"badge-danger\" },\n                { count : flightsWithWarning, message : \"flights with import warnings\", badgeType: \"badge-warning\" },\n                { count : flightsWithError, message : \"flights with import errors\", badgeType : \"badge-danger\" }\n            ]\n        };\n    }\n\n\n    render() {\n        return (\n            <div className=\"card mb-2 m-2\" style={{background : \"rgba(248,259,250,0.8)\", height:\"258px\"}}>\n                <h4 className=\"card-header\" style={{color : \"rgba(75,75,75,250)\"}}>Notifications</h4>\n                <div className=\"card-body\">\n                    <table>\n                        <tbody>\n                            {\n                                this.state.notifications.map((info, index) => {\n                                    if (info.count == 0) {\n                                        return;\n                                    } else {\n                                        return (\n                                            <tr key={index}>\n                                                <td style={{textAlign:\"right\", paddingBottom:\"6\"}}><span className={'badge ' + info.badgeType}>{Number(info.count).toLocaleString('en')}</span></td>\n                                                <td style={{paddingBottom:\"6\"}}>&nbsp;{info.message}</td>\n                                            </tr>\n                                        );\n                                    }\n                                })\n                            }\n                       </tbody>\n                    </table>\n                </div>\n            </div>\n        );\n    }\n}\n\n\nclass WelcomePage extends React.Component {\n    constructor(props) {\n        super(props);\n\n        var date = new Date();\n        this.state = {\n            airframe : \"All Airframes\",\n            startYear : 2020,\n            startMonth : 1,\n            endYear : date.getFullYear(),\n            endMonth : date.getMonth() + 1,\n            datesChanged : false\n        };\n    }\n\n    updateStartYear(newStartYear) {\n        console.log(\"setting new start year to: \" + newStartYear);\n        this.setState({startYear : newStartYear, datesChanged : true});\n        console.log(this.state);\n    }\n\n    updateStartMonth(newStartMonth) {\n        console.log(\"setting new start month to: \" + newStartMonth);\n        this.setState({startMonth : newStartMonth, datesChanged : true});\n        console.log(this.state);\n    }\n\n    updateEndYear(newEndYear) {\n        console.log(\"setting new end year to: \" + newEndYear);\n        this.setState({endYear : newEndYear, datesChanged : true});\n        console.log(this.state);\n    }\n\n    updateEndMonth(newEndMonth) {\n        console.log(\"setting new end month to: \" + newEndMonth);\n        this.setState({endMonth : newEndMonth, datesChanged : true});\n        console.log(this.state);\n    }\n\n    dateChange() {\n        console.log(\"[welcomecard] notifying date change 2, startYear: '\" + this.state.startYear + \"', startMonth: '\" + this.state.startMonth + \", endYear: '\" + this.state.endYear + \"', endMonth: '\" + this.state.endMonth + \"'\");\n\n        let startDate = this.state.startYear + \"-\";\n        let endDate = this.state.endYear + \"-\";\n\n        //0 pad the months on the front\n        if (parseInt(this.state.startMonth) < 10) startDate += \"0\" + parseInt(this.state.startMonth);\n        else startDate += this.state.startMonth;\n        if (parseInt(this.state.endMonth) < 10) endDate += \"0\" + parseInt(this.state.endMonth);\n        else endDate += this.state.endMonth;\n\n        var submission_data = {\n            startDate : startDate + \"-01\",\n            endDate : endDate + \"-28\"\n        };\n\n        $('#loading').show();\n        console.log(\"showing loading spinner!\");\n\n        let welcomePage = this;\n\n        $.ajax({\n            type: 'POST',\n            url: '/protected/event_counts',\n            data : submission_data,\n            dataType : 'json',\n            success : function(response) {\n                console.log(\"received response: \");\n                console.log(response);\n\n                $('#loading').hide();\n\n                if (response.err_msg) {\n                    errorModal.show(response.err_title, response.err_msg);\n                    return;\n                }\n\n                eventCounts = response;\n                displayPlots(welcomePage.state.airframe);\n                welcomePage.setState({datesChanged : false});\n            },\n            error : function(jqXHR, textStatus, errorThrown) {\n                errorModal.show(\"Error Loading Uploads\", errorThrown);\n            },\n            async: true\n        });\n    }\n\n    airframeChange(airframe) {\n        this.setState({airframe});\n        displayPlots(airframe);\n    }\n\n    render() {\n        //console.log(systemIds);\n\n        const numberOptions = {\n            minimumFractionDigits: 2,\n            maximumFractionDigits: 2\n        };\n\n        return (\n            <div>\n                <SignedInNavbar activePage={\"welcome\"} waitingUserCount={waitingUserCount} fleetManager={fleetManager} unconfirmedTailsCount={unconfirmedTailsCount} modifyTailsAccess={modifyTailsAccess} plotMapHidden={plotMapHidden}/>\n\n                <div className=\"container-fluid\">\n                    <div className=\"row\">\n                        <div className=\"col-lg-6\" style={{paddingRight:\"0\"}}>\n                            <div className=\"card mb-2 m-2\" style={{background : \"rgba(248,259,250,0.8)\"}}>\n                                <h4 className=\"card-header\" style={{color : \"rgba(75,75,75,250)\"}}>Your Fleet</h4>\n                                <div className=\"card-body\">\n                                    <div className=\"row\">\n                                        <div className = \"col-sm-4\">\n                                            <h3>{Number(flightHours / (60 * 60)).toLocaleString('en', numberOptions)}</h3> Flight Hours <br></br>\n                                        </div>\n\n                                        <div className = \"col-sm-4\">\n                                            <h3>{Number(numberFlights).toLocaleString('en')}</h3> Flights <br></br>\n                                        </div>\n\n                                        <div className = \"col-sm-4\">\n                                            <h3>{Number(numberAircraft).toLocaleString('en')}</h3> Aircraft <br></br>\n                                        </div>\n                                    </div>\n\n                                    <hr></hr>\n\n                                    <div className=\"row\">\n                                        <div className = \"col-sm-4\">\n                                            <h3>{Number(totalEvents).toLocaleString('en')}</h3> Total Events<br></br>\n                                        </div>\n\n                                        <div className = \"col-sm-4\">\n                                            <h3>{Number(yearEvents).toLocaleString('en')}</h3> Events This Year<br></br>\n                                        </div>\n\n                                        <div className = \"col-sm-4\">\n                                            <h3>{Number(monthEvents).toLocaleString('en')}</h3> Events This Month<br></br>\n                                        </div>\n\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div className=\"col-lg-6\" style={{paddingLeft:\"0\"}}>\n                            <Notifications />\n                        </div>\n                    </div>\n\n                    <div className=\"row\">\n                        <div className=\"col-lg-12\">\n                            <div className=\"card mb-2 m-2\" style={{background : \"rgba(248,259,250,0.8)\"}}>\n                                <TimeHeader\n                                    name=\"Events\"\n                                    airframes={airframes}\n                                    airframe={this.state.airframe}\n                                    airports={[]}\n                                    runways={[]}\n                                    startYear={this.state.startYear}\n                                    startMonth={this.state.startMonth}\n                                    endYear={this.state.endYear}\n                                    endMonth={this.state.endMonth}\n                                    datesChanged={this.state.datesChanged}\n                                    dateChange={() => this.dateChange()}\n                                    airframeChange={(airframe) => this.airframeChange(airframe)}\n                                    updateStartYear={(newStartYear) => this.updateStartYear(newStartYear)}\n                                    updateStartMonth={(newStartMonth) => this.updateStartMonth(newStartMonth)}\n                                    updateEndYear={(newEndYear) => this.updateEndYear(newEndYear)}\n                                    updateEndMonth={(newEndMonth) => this.updateEndMonth(newEndMonth)}\n                                />\n\n                            <div className=\"card-body\" style={{padding:\"0\"}}>\n                                <div className=\"row\" style={{margin:\"0\"}}>\n                                    <div className=\"col-lg-6\" style={{padding:\"0 8 0 0\"}}>\n                                        <div id=\"event-counts-plot\"></div>\n                                    </div>\n                                    <div className=\"col-lg-6\" style={{padding:\"0 0 0 8\"}}>\n                                        <div id=\"event-percents-plot\"></div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        );\n    }\n}\n\n\nvar welcomePage= ReactDOM.render(\n    <WelcomePage/>,\n    document.querySelector('#welcome-page')\n);\n\ndisplayPlots(\"All Airframes\");\n\n"],"mappings":"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"}]}